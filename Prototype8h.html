<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projet.JL - Stockage de liens infini</title>
    <style>
        /* Variables et thèmes */
        :root {
            /* Dark mode (défaut) */
            --bg-primary: #121212;
            --bg-secondary: #1e1e1e;
            --bg-tertiary: #2d2d2d;
            --text-primary: rgba(255, 255, 255, 0.87);
            --text-secondary: rgba(255, 255, 255, 0.6);
            --accent-color: #bb86fc;
            --accent-variant: #3700b3;
            --surface: #121212;
            --error: #cf6679;
            --success: #03dac6;
            
            /* Styles d'éléments d'interface */
            --card-radius: 16px;
            --button-radius: 24px;
            --input-radius: 12px;
            --transition-speed: 0.3s;
            --shadow-elevation-1: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            --shadow-elevation-2: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
            --shadow-elevation-3: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
            --glass-bg: rgba(30, 30, 30, 0.7);
            --neumorph-shadow: 5px 5px 10px #0f0f0f, -5px -5px 10px #1f1f1f;
            
            /* Layout */
            --app-bar-height: 56px;
            --bottom-nav-height: 64px;
            --side-panel-width: 280px;
            --bottom-sheet-max-height: 90vh;
        }

        [data-theme="light"] {
            --bg-primary: #f5f5f5;
            --bg-secondary: #e5e5e5;
            --bg-tertiary: #d5d5d5;
            --text-primary: rgba(0, 0, 0, 0.87);
            --text-secondary: rgba(0, 0, 0, 0.6);
            --accent-color: #6200ee;
            --accent-variant: #3700b3;
            --surface: #ffffff;
            --error: #b00020;
            --success: #018786;
            --glass-bg: rgba(230, 230, 230, 0.7);
            --neumorph-shadow: 5px 5px 10px #d1d1d1, -5px -5px 10px #ffffff;
        }

        /* Reset & Fondamentaux */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
            height: 100%;
        }

        body {
            font-family: 'Roboto', 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100%;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background-color: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background-color: var(--accent-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background-color: var(--accent-variant);
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 500;
            margin-bottom: 1rem;
        }

        p {
            margin-bottom: 1rem;
        }

        a {
            color: var(--accent-color);
            text-decoration: none;
            transition: color var(--transition-speed);
        }

        a:hover {
            color: var(--accent-variant);
        }

        /* Layout de base */
        #app {
            display: flex;
            flex-direction: column;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        main {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            margin-top: var(--app-bar-height);
            margin-bottom: var(--bottom-nav-height);
            transition: transform var(--transition-speed), margin var(--transition-speed);
        }

        /* Conteneurs */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            width: 100%;
        }

        /* App bars */
        .app-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--app-bar-height);
            background-color: var(--bg-secondary);
            z-index: 100;
            display: flex;
            align-items: center;
            padding: 0 1rem;
            box-shadow: var(--shadow-elevation-1);
            transition: transform var(--transition-speed), background-color var(--transition-speed);
        }

        .app-bar.scrolled {
            backdrop-filter: blur(10px);
            background-color: var(--glass-bg);
        }

        .app-bar-title {
            font-size: 1.25rem;
            font-weight: 500;
            margin: 0;
            flex: 1;
        }

        .app-bar-actions {
            display: flex;
            gap: 0.5rem;
        }

        .sub-app-bar {
            position: fixed;
            top: var(--app-bar-height);
            left: 0;
            right: 0;
            height: var(--app-bar-height);
            background-color: var(--bg-secondary);
            z-index: 99;
            display: flex;
            align-items: center;
            padding: 0 1rem;
            box-shadow: var(--shadow-elevation-1);
            transition: transform var(--transition-speed);
        }

        /* Navigation du bas */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--bottom-nav-height);
            background-color: var(--bg-secondary);
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            height: 100%;
            color: var(--text-secondary);
            transition: color var(--transition-speed);
            text-align: center;
            padding: 0.5rem;
        }

        .nav-item.active {
            color: var(--accent-color);
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        .nav-label {
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Bottom Sheet */
        .bottom-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--bg-secondary);
            border-radius: var(--card-radius) var(--card-radius) 0 0;
            box-shadow: var(--shadow-elevation-3);
            z-index: 1000;
            max-height: var(--bottom-sheet-max-height);
            transform: translateY(100%);
            transition: transform var(--transition-speed);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .bottom-sheet.open {
            transform: translateY(0);
        }

        .bottom-sheet-header {
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--bg-tertiary);
            position: relative;
        }

        .bottom-sheet-handle {
            position: absolute;
            top: 0.5rem;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 4px;
            border-radius: 2px;
            background-color: var(--text-secondary);
        }

        .bottom-sheet-title {
            font-size: 1.25rem;
            font-weight: 500;
            margin: 0;
        }

        .bottom-sheet-body {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        /* Side Panel */
        .side-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: var(--side-panel-width);
            height: 100vh;
            background-color: var(--bg-secondary);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform var(--transition-speed);
            box-shadow: var(--shadow-elevation-3);
            display: flex;
            flex-direction: column;
        }

        .side-panel.open {
            transform: translateX(0);
        }

        .side-panel-header {
            height: var(--app-bar-height);
            padding: 0 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--bg-tertiary);
        }

        .side-panel-title {
            font-size: 1.25rem;
            font-weight: 500;
            margin: 0;
        }

        .side-panel-body {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        /* Tab Interface */
        .tabs-container {
            display: flex;
            flex-direction: column;
            width: 100%;
        }

.tabs-header {
    display: flex;
    overflow-x: auto;
    scrollbar-width: none;
    background-color: var(--bg-secondary);
    border-radius: var(--card-radius) var(--card-radius) 0 0;
    width: 100%;
}

.tabs-header::-webkit-scrollbar {
    display: none;
}

.tabs-header .tab-item {
    flex: 1;
    text-align: center;
    min-width: fit-content;
    display: flex;
    justify-content: center;
}


        .tab-item {
            padding: 1rem 1.5rem;
            white-space: nowrap;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-speed);
            position: relative;
            font-weight: 500;
        }

        .tab-item.active {
            color: var(--accent-color);
        }

        .tab-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background-color: var(--accent-color);
            border-radius: 3px 3px 0 0;
        }

        .tabs-content {
            background-color: var(--bg-tertiary);
            border-radius: 0 0 var(--card-radius) var(--card-radius);
            padding: 1rem;
            flex: 1;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        /* Cards */
        .card {
            background-color: var(--bg-secondary);
            border-radius: var(--card-radius);
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow-elevation-1);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-elevation-2);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.25rem;
            border-radius: var(--button-radius);
            font-weight: 500;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all var(--transition-speed);
            border: none;
            background: var(--accent-color);
            color: #fff;
        }

        .btn:hover {
            background: var(--accent-variant);
        }

        .btn-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: all var(--transition-speed);
            background: transparent;
            color: var(--text-primary);
            border: none;
        }

        .btn-icon:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .btn-pill {
            border-radius: 100px;
            padding: 0.5rem 1.5rem;
        }

        .btn-flat {
            background: transparent;
            color: var(--accent-color);
        }

        .btn-flat:hover {
            background: rgba(var(--accent-color-rgb), 0.1);
        }

        /* Inputs */
        .input-group {
            margin-bottom: 1rem;
            position: relative;
        }

        .input {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: var(--input-radius);
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid transparent;
            transition: all var(--transition-speed);
            outline: none;
            font-size: 1rem;
        }

        .input:focus {
            border-color: var(--accent-color);
        }

        .input-label {
            position: absolute;
            left: 1rem;
            top: 0.75rem;
            color: var(--text-secondary);
            pointer-events: none;
            transition: all var(--transition-speed);
            font-size: 1rem;
        }

        .input:focus ~ .input-label,
        .input:not(:placeholder-shown) ~ .input-label {
            top: -0.5rem;
            left: 0.5rem;
            font-size: 0.75rem;
            background-color: var(--bg-tertiary);
            padding: 0 0.5rem;
            color: var(--accent-color);
        }

        .input-underlined {
            border: none;
            border-bottom: 2px solid var(--bg-tertiary);
            border-radius: 0;
            padding: 0.75rem 0;
            background: transparent;
        }

        .input-underlined:focus {
            border-bottom-color: var(--accent-color);
        }

        /* Accordion */
        .accordion {
            width: 100%;
            margin-bottom: 1rem;
            border-radius: var(--card-radius);
            overflow: hidden;
            background-color: var(--bg-secondary);
        }

        .accordion-header {
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: background-color var(--transition-speed);
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            font-weight: 500;
        }

        .accordion-header:hover {
            background-color: var(--bg-tertiary);
        }

        .accordion-icon {
            transition: transform var(--transition-speed);
        }

        .accordion.active .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height var(--transition-speed);
        }

        .accordion.active .accordion-content {
            max-height: 1000px;
        }

        .accordion-body {
            padding: 1rem;
            border-top: 1px solid var(--bg-tertiary);
        }

        /* File Explorer Elements */
        .explorer-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .path-breadcrumb {
            display: flex;
            align-items: center;
            padding: 0.5rem 0;
            margin-bottom: 1rem;
            overflow-x: auto;
            scrollbar-width: none;
            white-space: nowrap;
        }

        .path-breadcrumb::-webkit-scrollbar {
            display: none;
        }

        .path-item {
            display: inline-flex;
            align-items: center;
            color: var(--text-secondary);
        }

        .path-separator {
            margin: 0 0.5rem;
            color: var(--text-secondary);
        }

        .path-item.active {
            color: var(--accent-color);
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
        }

        .items-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .explorer-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem;
            border-radius: var(--card-radius);
            background-color: var(--bg-tertiary);
            cursor: pointer;
            transition: all var(--transition-speed);
            text-align: center;
            position: relative;
        }

        .explorer-item:hover {
            background-color: var(--bg-primary);
            box-shadow: var(--shadow-elevation-1);
        }

        .explorer-item.selected {
            border: 2px solid var(--accent-color);
        }

        .item-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--accent-color);
        }

        .item-name {
            font-size: 0.875rem;
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .item-options {
            position: absolute;
            top: 0.25rem;
            right: 0.25rem;
        }

        .item-list-view {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            border-radius: var(--card-radius);
            background-color: var(--bg-tertiary);
            cursor: pointer;
            transition: all var(--transition-speed);
        }

        .item-list-view:hover {
            background-color: var(--bg-primary);
            box-shadow: var(--shadow-elevation-1);
        }

        .item-list-view .item-icon {
            margin-right: 0.75rem;
            margin-bottom: 0;
            font-size: 1.5rem;
        }

        .item-list-view .item-name {
            flex: 1;
            text-align: left;
        }

        /* QR Code */
        .qr-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 2rem 0;
        }

        .qr-code {
            width: 200px;
            height: 200px;
            background-color: white;
            padding: 1rem;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow-elevation-2);
        }

        /* Glassmorphism */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--card-radius);
        }

        /* Neumorphism */
        .neumorphic {
            background: var(--bg-primary);
            box-shadow: var(--neumorph-shadow);
            border-radius: var(--card-radius);
        }

        /* File tree visualization */
        .file-tree {
            margin: 1rem 0;
            font-family: monospace;
        }

        .file-tree ul {
            list-style-type: none;
            padding-left: 1.5rem;
        }

        .file-tree li {
            position: relative;
            padding: 0.25rem 0;
        }

        .tree-toggle {
            cursor: pointer;
            user-select: none;
        }

        .tree-toggle::before {
            content: '►';
            display: inline-block;
            margin-right: 0.5rem;
            transition: transform var(--transition-speed);
        }

        .tree-toggle.open::before {
            transform: rotate(90deg);
        }

        .tree-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height var(--transition-speed);
        }

        .tree-toggle.open + .tree-content {
            max-height: 1000px;
        }

        .file-icon {
            margin-right: 0.5rem;
            color: var(--accent-color);
        }

        /* Page transitions */
        .page-container {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .page {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0;
            transform: translateX(100%);
            transition: transform var(--transition-speed), opacity var(--transition-speed);
            overflow-y: auto;
        }

        .page.active {
            opacity: 1;
            transform: translateX(0);
        }

        .page.previous {
            transform: translateX(-100%);
        }

        /* Toast notifications */
        .toast-container {
            position: fixed;
            bottom: calc(var(--bottom-nav-height) + 1rem);
            left: 50%;
            transform: translateX(-50%);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            width: calc(100% - 2rem);
            max-width: 400px;
        }

        .toast {
            padding: 1rem;
            border-radius: var(--card-radius);
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            box-shadow: var(--shadow-elevation-2);
            display: flex;
            align-items: center;
            animation: toast-in 0.3s ease-out;
        }

        .toast.success {
            background-color: var(--success);
            color: #000;
        }

        .toast.error {
            background-color: var(--error);
            color: #fff;
        }

        .toast-icon {
            margin-right: 0.75rem;
            font-size: 1.25rem;
        }

        .toast-message {
            flex: 1;
        }

        @keyframes toast-in {
            0% { transform: translateY(100%); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        /* Responsive adaptations */
        @media (min-width: 768px) {
            /* Tablettes */
            .items-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            main {
                margin-bottom: 0;
            }
            
            .bottom-nav {
                transform: translateY(100%);
            }
            
            .side-panel {
                width: 320px;
            }
        }

        @media (min-width: 1024px) {
            /* Desktop */
            :root {
                --app-bar-height: 64px;
                --side-panel-width: 320px;
            }
            
            .items-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
            
            main {
                margin-left: var(--side-panel-width);
                padding: 2rem;
            }
            
            .side-panel {
                transform: translateX(0);
                left: 0;
                width: var(--side-panel-width);
                box-shadow: none;
                border-right: 1px solid var(--bg-tertiary);
            }
            
            .app-bar {
                left: var(--side-panel-width);
            }
            
            .bottom-nav {
                display: none;
            }

            /* Pour basculer en mode plein écran */
            .side-panel.collapsed {
                transform: translateX(-100%);
            }
            
            .app-bar.full-width {
                left: 0;
            }
            
            main.full-width {
                margin-left: 0;
            }
        }
        
        /* Animation et transitions */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn var(--transition-speed) ease-in-out;
        }
        
        .slide-in {
            animation: slideIn var(--transition-speed) ease-in-out;
        }
    
    /* Modifier le comportement du conteneur explorer pour éviter le scroll global */
.explorer-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    max-height: calc(100vh - var(--app-bar-height) - 2rem); /* Hauteur maximale */
    overflow: hidden; /* Empêche le débordement */
}

/* Adapter la structure des tabs pour permettre le défilement interne */
.tabs-container {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%; /* Utiliser toute la hauteur disponible */
    max-height: calc(100vh - var(--app-bar-height) - var(--bottom-nav-height) - 4rem); /* Tenir compte du bottom-nav */
}

/* Modifier tabs-content pour y activer le scroll */
.tabs-content {
    background-color: var(--bg-tertiary);
    border-radius: 0 0 var(--card-radius) var(--card-radius);
    padding: 1rem;
    flex: 1;
    overflow-y: auto; /* Activer le défilement vertical */
    max-height: 100%; /* Utiliser l'espace disponible */
}

/* Assurer que la path-breadcrumb reste visible */
.path-breadcrumb {
    display: flex;
    align-items: center;
    padding: 0.5rem 0;
    margin-bottom: 1rem;
    overflow-x: auto;
    scrollbar-width: none;
    white-space: nowrap;
    position: sticky; /* Garder visible lors du défilement */
    top: 0;
    z-index: 10;
    background-color: var(--bg-primary);
}

/* Assurer que la tabs-header reste visible */
.tabs-header {
    display: flex;
    overflow-x: auto;
    scrollbar-width: none;
    background-color: var(--bg-secondary);
    border-radius: var(--card-radius) var(--card-radius) 0 0;
    position: sticky; /* Garder visible lors du défilement */
    top: 0;
    z-index: 10;
}

/* Adapter le comportement sur mobile */
@media (max-width: 768px) {
    .tabs-container {
        max-height: calc(100vh - var(--app-bar-height) - var(--bottom-nav-height) - 3rem); /* Ajuster pour mobile */
    }
    
    .explorer-container {
        max-height: calc(100vh - var(--app-bar-height) - var(--bottom-nav-height) - 2rem);
    }
}
/* Modifier le comportement de la page explorer */
#explorer {
    overflow: hidden; /* Empêcher le défilement de la page */
    height: 100%; /* Utiliser toute la hauteur */
    display: flex;
    flex-direction: column;
}

#explorer .container {
    height: 100%;
    overflow: hidden;
}
/* S'assurer que les éléments de la grille s'affichent correctement */
.items-grid, .items-list {
    width: 100%;
}

/* S'assurer que chaque élément est visible en entier */
.explorer-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem;
    border-radius: var(--card-radius);
    background-color: var(--bg-tertiary);
    cursor: pointer;
    transition: all var(--transition-speed);
    text-align: center;
    position: relative;
    margin-bottom: 1rem; /* Ajouter de l'espace entre les éléments */
}

    
    
    /* Styles pour conteneurs minimalistes sur grands écrans */
.page .container {
    max-width: 600px;  /* Largeur maximale qui donne une impression de mobile */
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    padding: 0 1rem;
    box-sizing: border-box;
}

/* Pour s'assurer que le contenu ne déborde pas */
.page {
    width: 100%;
    overflow-x: hidden;
}

/* Sur les grands écrans, on peut ajouter une légère ombre pour délimiter visuellement */
@media (min-width: 768px) {
    .page .container {
        background-color: var(--bg-primary);
        box-shadow: var(--shadow-elevation-1);
        padding: 1rem;
        border-radius: var(--card-radius);
        margin-top: 1rem;
        margin-bottom: 1rem;
    }
}

/* Sur les très grands écrans, on maintient toujours une largeur raisonnable */
@media (min-width: 1200px) {
    .page .container {
        max-width: 600px;  /* On garde la même largeur même sur très grands écrans */
    }
}

/* Pour la page explorer spécifiquement, qui a besoin d'ajustements particuliers */
#explorer .container {
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    height: calc(100vh - var(--app-bar-height) - var(--bottom-nav-height) - 2rem);
    overflow: hidden;
}

/* Ajuster la grille d'éléments pour qu'elle s'adapte mieux à cette nouvelle largeur */
.items-grid {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 0.75rem;
}

@media (min-width: 768px) {
    .items-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    }
}

    
    
.bottom-sheet.dragging {
    will-change: transform;
    user-select: none;
}

.bottom-sheet-header {
    touch-action: none; /* Empêche les comportements tactiles par défaut */
    cursor: grab; /* Indique visuellement que l'élément peut être déplacé */
}

.bottom-sheet-header:active {
    cursor: grabbing; /* Change pendant le déplacement */
}

/* Adapter le bottom-sheet au style minimaliste sur grands écrans */
@media (min-width: 768px) {
    .bottom-sheet {
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        left: 0;
        right: 0;
        border-radius: var(--card-radius) var(--card-radius) 0 0;
        box-shadow: var(--shadow-elevation-3);
        background-color: var(--bg-secondary);
    }
    
    /* Assurer que la transition reste fluide */
    .bottom-sheet.open {
        transform: translateY(0);
    }
    
    /* S'assurer que le défilement reste fluide */
    .bottom-sheet-body {
        overflow-y: auto;
        max-height: calc(var(--bottom-sheet-max-height) - var(--app-bar-height));
    }
}

/* Maintenir le style minimaliste sur très grands écrans */
@media (min-width: 1200px) {
    .bottom-sheet {
        max-width: 600px; /* Même largeur que le contenu principal */
    }
}

    
    /* Nouvelle interface de création d'éléments */
.creation-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--bg-primary);
    z-index: 1000;
    display: flex;
    flex-direction: column;
    transition: transform var(--transition-speed), opacity var(--transition-speed);
    transform: translateY(100%);
    opacity: 0;
    overflow: hidden;
}

.creation-overlay.active {
    transform: translateY(0);
    opacity: 1;
}

.creation-header {
    height: var(--app-bar-height);
    background-color: var(--bg-secondary);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 1rem;
    border-bottom: 1px solid var(--bg-tertiary);
    position: relative;
}

.creation-path {
    font-size: 0.85rem;
    color: var(--text-secondary);
    padding: 0.5rem 1rem;
    background-color: var(--bg-tertiary);
    white-space: nowrap;
    overflow-x: auto;
    scrollbar-width: none;
}

.creation-path::-webkit-scrollbar {
    display: none;
}

.creation-options {
    display: flex;
    flex-direction: column;
    padding: 2rem;
    gap: 1.5rem;
}

.creation-option {
    display: flex;
    align-items: center;
    padding: 1.5rem;
    border-radius: var(--card-radius);
    background-color: var(--bg-secondary);
    cursor: pointer;
    transition: all var(--transition-speed);
}

.creation-option:hover {
    background-color: var(--bg-tertiary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-elevation-2);
}

.creation-option-icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--accent-color);
    border-radius: 50%;
    margin-right: 1.5rem;
    flex-shrink: 0;
}

.creation-option-content {
    flex: 1;
}

.creation-option-title {
    font-size: 1.25rem;
    font-weight: 500;
    margin-bottom: 0.5rem;
}

.creation-option-description {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

/* Interfaces de création spécifiques */
.folder-creation, .link-creation, .text-creation {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--bg-primary);
    z-index: 1100;
    display: flex;
    flex-direction: column;
    transition: transform var(--transition-speed), opacity var(--transition-speed);
    transform: translateX(100%);
    opacity: 0;
}

.folder-creation.active, .link-creation.active, .text-creation.active {
    transform: translateX(0);
    opacity: 1;
}

.folder-creation-content, .link-creation-content {
    flex: 1;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
    max-width: 500px;
    margin: 0 auto;
    width: 100%;
}

/* Éditeur de texte */
.text-editor-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.text-editor-toolbar {
    display: flex;
    padding: 0.5rem;
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--bg-tertiary);
    overflow-x: auto;
    scrollbar-width: none;
}

.text-editor-toolbar::-webkit-scrollbar {
    display: none;
}

.toolbar-btn {
    padding: 0.5rem;
    background: none;
    border: none;
    color: var(--text-primary);
    cursor: pointer;
    border-radius: var(--button-radius);
    display: flex;
    align-items: center;
    justify-content: center;
}

.toolbar-btn:hover {
    background-color: var(--bg-tertiary);
}

.toolbar-divider {
    width: 1px;
    height: 24px;
    background-color: var(--bg-tertiary);
    margin: 0 0.5rem;
}

.text-editor {
    flex: 1;
    padding: 1rem;
    background-color: var(--bg-primary);
    overflow-y: auto;
    border: none;
    outline: none;
    resize: none;
    color: var(--text-primary);
    font-family: 'Roboto', 'Segoe UI', system-ui, sans-serif;
    line-height: 1.6;
}

.text-editor:focus {
    outline: none;
}

.creation-footer {
    padding: 1rem;
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    background-color: var(--bg-secondary);
    border-top: 1px solid var(--bg-tertiary);
}

/* Animation de transition */
.slide-in-right {
    animation: slideInRight var(--transition-speed) forwards;
}

.slide-out-right {
    animation: slideOutRight var(--transition-speed) forwards;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(-100%);
        opacity: 0;
    }
}

/* Adaptations responsives */
@media (max-width: 768px) {
    .creation-options {
        padding: 1rem;
    }
    
    .creation-option {
        padding: 1rem;
    }
    
    .creation-option-icon {
        width: 40px;
        height: 40px;
        margin-right: 1rem;
    }
    
    .folder-creation-content, .link-creation-content {
        padding: 1rem;
    }
}

/* Styles pour la sélection d'éléments */
.explorer-item {
    user-select: none; /* Désactive la sélection de texte par défaut */
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}

.explorer-item.selected {
    border: 2px solid var(--accent-color);
    background-color: rgba(var(--accent-color-rgb, 187, 134, 252), 0.15);
}

.selection-toolbar {
    position: fixed;
    bottom: var(--bottom-nav-height);
    left: 0;
    right: 0;
    background-color: var(--bg-secondary);
    box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.2);
    padding: 0.5rem;
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    z-index: 99;
    transform: translateY(100%);
    transition: transform 0.3s ease-out;
    justify-content: space-around;
    align-items: center;
    scrollbar-width: none;
    height: 56px;
}

.selection-toolbar::-webkit-scrollbar {
    display: none;
}

.selection-toolbar.visible {
    transform: translateY(0);
}

.selection-toolbar .toolbar-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-width: 56px;
    height: 100%;
    padding: 0.25rem;
    border-radius: var(--button-radius);
    color: var(--text-primary);
    font-size: 0.65rem;
    white-space: nowrap;
}

.selection-toolbar .toolbar-btn.active {
    color: var(--accent-color);
    background-color: rgba(var(--accent-color-rgb, 187, 134, 252), 0.15);
}

.selection-toolbar .toolbar-btn.disabled {
    opacity: 0.5;
    pointer-events: none;
}

.selection-toolbar .toolbar-btn .icon {
    margin-bottom: 0.25rem;
    font-size: 1.2rem;
}

.selection-counter {
    background-color: var(--accent-color);
    color: white;
    border-radius: 50px;
    padding: 0.25rem 0.75rem;
    font-size: 0.8rem;
    font-weight: bold;
    margin-right: 0.5rem;
}

@media (min-width: 768px) {
    .selection-toolbar {
        bottom: 0;
        width: 100%;
        max-width: 600px;
        left: 50%;
        transform: translateX(-50%) translateY(100%);
        border-radius: var(--card-radius) var(--card-radius) 0 0;
    }
    
    .selection-toolbar.visible {
        transform: translateX(-50%) translateY(0);
    }
}

/* Styles pour les touche de modification */
.modifier-key {
    border: 1px solid var(--text-secondary);
    border-radius: 4px;
    padding: 0.25rem 0.5rem;
    font-family: monospace;
    font-size: 0.8rem;
    text-transform: uppercase;
}

    </style>
</head>
<body data-theme="dark">
    <div id="app">
        <!-- App Bar -->
        <div class="app-bar">
            <button class="btn-icon toggle-sidebar-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 18H21V16H3V18ZM3 13H21V11H3V13ZM3 6V8H21V6H3Z" fill="currentColor"/>
                </svg>
            </button>
            <h1 class="app-bar-title">Projet.JL</h1>
            <div class="app-bar-actions">
                <button class="btn-icon theme-toggle-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 3C7.03 3 3 7.03 3 12C3 16.97 7.03 21 12 21C16.97 21 21 16.97 21 12C21 7.03 16.97 3 12 3ZM12 19C8.13 19 5 15.87 5 12C5 8.13 8.13 5 12 5C15.87 5 19 8.13 19 12C19 15.87 15.87 19 12 19Z" fill="currentColor"/>
                        <path d="M12 7V17C14.76 17 17 14.76 17 12C17 9.24 14.76 7 12 7Z" fill="currentColor"/>
                    </svg>
                </button>
                <button class="btn-icon search-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" fill="currentColor"/>
                    </svg>
                </button>
                <button class="btn-icon more-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 8C13.1 8 14 7.1 14 6C14 4.9 13.1 4 12 4C10.9 4 10 4.9 10 6C10 7.1 10.9 8 12 8ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10ZM12 16C10.9 16 10 16.9 10 18C10 19.1 10.9 20 12 20C13.1 20 14 19.1 14 18C14 16.9 13.1 16 12 16Z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Side Panel -->
        <div class="side-panel">
            <div class="side-panel-header">
                <h2 class="side-panel-title">Projet.JL</h2>
                <button class="btn-icon close-sidebar-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
            <div class="side-panel-body">
                <nav class="sidebar-nav">
                    <a href="#accueil" class="sidebar-nav-item active" data-page="accueil">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z" fill="currentColor"/>
                        </svg>
                        <span>Accueil</span>
                    </a>
                    <a href="#explorer" class="sidebar-nav-item" data-page="explorer">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                        </svg>
                        <span>Explorateur</span>
                    </a>
                    <a href="#projet" class="sidebar-nav-item" data-page="projet">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM7 10H9V17H7V10ZM11 7H13V17H11V7ZM15 13H17V17H15V13Z" fill="currentColor"/>
                        </svg>
                        <span>Espace Projet</span>
                    </a>
                </nav>
            </div>
        </div>

        <!-- Main Content -->
        <main>
            <div class="page-container">
                <!-- Page Accueil -->
                <div class="page active" id="accueil">
                    <div class="container">
                        <div class="card glass slide-in">
                            <h2>Bienvenue sur Projet.JL</h2>
                            <p>Votre espace de stockage <strong>infini ♾️</strong> pour tous vos liens web.</p>
                        </div>
                        
                        <div class="card neumorphic fade-in">
                            <h3>Qu'est-ce que le Projet JL?</h3>
                            <p>Le projet JL est un système conçu par Jean-Louis LIKULA pour résoudre un problème fondamental : la conservation et l'organisation des liens web dans un espace infini et toujours accessible.</p>
                            
                            <div class="accordion">
                                <div class="accordion-header">
                                    <span>Lire plus</span>
                                    <div class="accordion-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7.41 8.59L12 13.17L16.59 8.59L18 10L12 16L6 10L7.41 8.59Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="accordion-content">
                                    <div class="accordion-body">
                                        <p>L'infinité du monde web est selon moi ce qui représente l'infini dans ce monde. Il y a tellement un nombre incalculable de ressources à découvrir, à offrir, à explorer. Et tout passe par un chemin : <strong>un lien web</strong>.</p>
                                        
                                        <p>Vous n'imaginez pas combien de merveilles j'ai pu découvrir grâce à de simples liens, qui sont juste une sorte de textes courts mais qui font d'immenses choses. Vous n'imaginez pas non plus combien de ces merveilles j'ai pu oublier ou perdre, tout ça parce que je n'avais pas un endroit où les stocker.</p>
                                        
                                        <p>Les gestionnaires de fichiers classiques ne servent qu'à stocker des vidéos, images, et d'autres types de fichiers accessibles nativement et surtout ils sont toujours limités au nombre de stockage, à l'appareil, ou au support de stockage...</p>
                                        
                                        <p>Je devais créer ce système, trouver une solution qui serait à la fois :</p>
                                        <ul>
                                            <li>Toujours accessible (n'importe où, n'importe quand)</li>
                                            <li>Non limitée, non dépendante d'un système (base de données, stockage, connexion internet)</li>
                                        </ul>
                                        
                                        <p>Je devais trouver des solutions qui représentent, qui concordent avec l'infinité du web, quelque chose qui peut devenir le web à sa façon : pas besoin de dépendre d'une base de données, d'un système, d'une plateforme, d'une connexion internet.</p>
                                        
                                        <p>Voilà pourquoi j'ai créé ce système de stockage infini, accessible n'importe où, n'importe quand, hors-ligne, qui peut se trouver partout à la fois et où l'utilisateur est le maître de tout, un dieu qui contrôle son propre monde, qui est responsable de tout, qui modélise tout à sa façon, sans limites.</p>
                                        
                                        <p>C'est ça l'infini.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <h3>Comment utiliser ce projet ?</h3>
                            <p>Projet.JL est simple à utiliser mais nécessite quelques étapes pour préserver vos données.</p>
                            
                            <div class="accordion">
                                <div class="accordion-header">
                                    <span>Guide d'utilisation</span>
                                    <div class="accordion-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7.41 8.59L12 13.17L16.59 8.59L18 10L12 16L6 10L7.41 8.59Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="accordion-content">
                                    <div class="accordion-body">
                                        <ol>
                                            <li>Créez votre premier dossier, ajoutez votre premier lien ou texte.</li>
                                            <li>Avant de quitter l'application, exportez un fichier JSON qui servira de base de données.</li>
                                            <li>Placez ce fichier dans le dossier <code>data</code> à la racine de votre projet.</li>
                                        </ol>
                                        
                                        <p>L'arborescence de votre projet devrait ressembler à ceci :</p>
                                        
                                        <div class="file-tree">
                                            <ul>
                                                <li>
                                                    <span class="tree-toggle">votre-projet</span>
                                                    <div class="tree-content">
                                                        <ul>
                                                            <li>
                                                                <span class="tree-toggle">data</span>
                                                                <div class="tree-content">
                                                                    <ul>
                                                                        <li>
                                                                            <svg class="file-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" fill="currentColor"/>
                                                                                <path d="M14 3V8H19" fill="var(--bg-secondary)"/>
                                                                            </svg>
                                                                            backup_2025-11-01_10-30-45.json
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <svg class="file-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" fill="currentColor"/>
                                                                    <path d="M14 3V8H19" fill="var(--bg-secondary)"/>
                                                                </svg>
                                                                index.html
                                                            </li>
                                                            <li>
                                                                <svg class="file-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" fill="currentColor"/>
                                                                    <path d="M14 3V8H19" fill="var(--bg-secondary)"/>
                                                                </svg>
                                                                styles.css
                                                            </li>
                                                            <li>
                                                                <svg class="file-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" fill="currentColor"/>
                                                                    <path d="M14 3V8H19" fill="var(--bg-secondary)"/>
                                                                </svg>
                                                                scripts.js
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        <p>Le nom du fichier par défaut suit le format : <code>backup_YYYY-MM-DD_HH-MM-SS.json</code></p>
                                        
                                        <p>Si vous changez de navigateur ou d'appareil, importez simplement ce fichier JSON pour retrouver toutes vos données.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Page Explorateur -->
                <div class="page" id="explorer">
                    <div class="container">
                        <div class="explorer-container">
                            <div class="path-breadcrumb">
                                <div class="path-item active">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z" fill="currentColor"/>
                                    </svg>
                                    <span>Accueil</span>
                                </div>
                            </div>
                            
                            <div class="explorer-actions">
                                <div class="tabs-container">
                                    <div class="tabs-header">
                                        <div class="tab-item active" data-tab="all">Tous</div>
                                        <div class="tab-item" data-tab="folders">Dossiers</div>
                                        <div class="tab-item" data-tab="links">Liens</div>
                                        <div class="tab-item" data-tab="texts">Textes</div>
                                    </div>
                                    
                                    <div class="tabs-content">
                                        <div class="tab-panel active" data-tab-content="all">
                                            <div class="items-grid">
                                                <div class="explorer-item" data-type="folder">
                                                    <div class="item-icon">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                                                        </svg>
                                                    </div>
                                                    <div class="item-name">Projets Web</div>
                                                </div>
                                                
                                                <div class="explorer-item" data-type="folder">
                                                    <div class="item-icon">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                                                        </svg>
                                                    </div>
                                                    <div class="item-name">Tutoriels</div>
                                                </div>
                                                
                                                <div class="explorer-item" data-type="link">
                                                    <div class="item-icon">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="currentColor"/>
                                                        </svg>
                                                    </div>
                                                    <div class="item-name">MDN Web Docs</div>
                                                </div>
                                                
                                                <div class="explorer-item" data-type="link">
                                                    <div class="item-icon">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="currentColor"/>
                                                        </svg>
                                                    </div>
                                                    <div class="item-name">GitHub</div>
                                                </div>
                                                
                                                <div class="explorer-item" data-type="text">
                                                    <div class="item-icon">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M14 2H6C4.9 2 4.01 2.9 4.01 4L4 20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2ZM16 18H8V16H16V18ZM16 14H8V12H16V14ZM13 9V3.5L18.5 9H13Z" fill="currentColor"/>
                                                        </svg>
                                                    </div>
                                                    <div class="item-name">Notes JavaScript</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="tab-panel" data-tab-content="folders">
                                            <div class="items-grid">
                                                <div class="explorer-item" data-type="folder">
                                                    <div class="item-icon">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                                                        </svg>
                                                    </div>
                                                    <div class="item-name">Projets Web</div>
                                                </div>
                                                
                                                <div class="explorer-item" data-type="folder">
                                                    <div class="item-icon">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                                                        </svg>
                                                    </div>
                                                    <div class="item-name">Tutoriels</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="tab-panel" data-tab-content="links">
                                            <div class="items-grid">
                                                <div class="explorer-item" data-type="link">
                                                    <div class="item-icon">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="currentColor"/>
                                                        </svg>
                                                    </div>
                                                    <div class="item-name">MDN Web Docs</div>
                                                </div>
                                                
                                                <div class="explorer-item" data-type="link">
                                                    <div class="item-icon">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="currentColor"/>
                                                        </svg>
                                                    </div>
                                                    <div class="item-name">GitHub</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="tab-panel" data-tab-content="texts">
                                            <div class="items-grid">
                                                <div class="explorer-item" data-type="text">
                                                    <div class="item-icon">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M14 2H6C4.9 2 4.01 2.9 4.01 4L4 20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2ZM16 18H8V16H16V18ZM16 14H8V12H16V14ZM13 9V3.5L18.5 9H13Z" fill="currentColor"/>
                                                        </svg>
                                                    </div>
                                                    <div class="item-name">Notes JavaScript</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Page Projet -->
                <div class="page" id="projet">
                    <div class="container">
                        <div class="card glass">
                            <h2>Espace Projet</h2>
                            <p>Préservez votre travail et accédez à votre projet depuis n'importe où.</p>
                        </div>
                        
                        <div class="card neumorphic">
                            <h3>Recommandations importantes</h3>
                            <p>Pour préserver votre projet en cas d'oubli de compte ou mot de passe :</p>
                            <ul>
                                <li>Uploadez toujours votre projet quelque part en ligne (cloud)</li>
                                <li>Rendez le projet public pour y avoir accès plus facilement</li>
                                <li>Mettez régulièrement à jour votre projet, surtout les fichiers JSON</li>
                            </ul>
                        </div>
                        
                        <div class="card">
                            <h3>Plateformes de stockage recommandées</h3>
                            <div class="accordion">
                                <div class="accordion-header">
                                    <span>GitHub</span>
                                    <div class="accordion-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7.41 8.59L12 13.17L16.59 8.59L18 10L12 16L6 10L7.41 8.59Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="accordion-content">
                                    <div class="accordion-body">
                                        <p>Idéal pour le code source, avec contrôle de versions. Créez un dépôt public pour un accès facile.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion">
                                <div class="accordion-header">
                                    <span>Plateformes IPFS</span>
                                    <div class="accordion-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7.41 8.59L12 13.17L16.59 8.59L18 10L12 16L6 10L7.41 8.59Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="accordion-content">
                                    <div class="accordion-body">
                                        <p>IPFS (InterPlanetary File System) est un système décentralisé pour stocker et accéder aux fichiers. Les fichiers stockés sur IPFS sont permanents, résistants à la censure et distribués globalement.</p>
                                        <p>Options recommandées :</p>
                                        <ul>
                                            <li>IPFS.io - Service principal</li>
                                            <li>Web3.Storage - Stockage gratuit jusqu'à 1TB</li>
                                            <li>NFT.Storage - Optimisé pour les contenus permanents</li>
                                            <li>Pinata Cloud - Interface simple et plans gratuits</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion">
                                <div class="accordion-header">
                                    <span>Google Drive</span>
                                    <div class="accordion-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7.41 8.59L12 13.17L16.59 8.59L18 10L12 16L6 10L7.41 8.59Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="accordion-content">
                                    <div class="accordion-body">
                                        <p>Solution cloud populaire avec 15GB gratuits. Facile à partager et accessible sur tous les appareils.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion">
                                <div class="accordion-header">
                                    <span>Mega</span>
                                    <div class="accordion-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7.41 8.59L12 13.17L16.59 8.59L18 10L12 16L6 10L7.41 8.59Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="accordion-content">
                                    <div class="accordion-body">
                                        <p>Offre 20GB de stockage gratuit avec chiffrement de bout en bout pour plus de sécurité.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion">
                                <div class="accordion-header">
                                    <span>MediaFire</span>
                                    <div class="accordion-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7.41 8.59L12 13.17L16.59 8.59L18 10L12 16L6 10L7.41 8.59Z" fill="currentColor"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="accordion-content">
                                    <div class="accordion-body">
                                        <p>10GB gratuits avec téléchargement direct et liens de partage simples.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <h3>Générer un QR code pour accéder à votre projet</h3>
                            <p>Insérez le lien de votre projet pour créer un QR code portable :</p>
                            <div class="input-group">
                                <input type="text" class="input" id="project-link" placeholder=" ">
                                <label for="project-link" class="input-label">Lien du projet</label>
                            </div>
                            <button class="btn btn-pill" id="generate-qr">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                                    <path d="M3 11H11V3H3V11ZM5 5H9V9H5V5Z" fill="white"/>
                                    <path d="M3 21H11V13H3V21ZM5 15H9V19H5V15Z" fill="white"/>
                                    <path d="M13 3V11H21V3H13ZM19 9H15V5H19V9Z" fill="white"/>
                                    <path d="M21 19H19V21H21V19Z" fill="white"/>
                                    <path d="M15 13H13V15H15V13Z" fill="white"/>
                                    <path d="M17 15H15V17H17V15Z" fill="white"/>
                                    <path d="M15 17H13V19H15V17Z" fill="white"/>
                                    <path d="M17 19H15V21H17V19Z" fill="white"/>
                                    <path d="M19 17H17V19H19V17Z" fill="white"/>
                                    <path d="M19 13H17V15H19V13Z" fill="white"/>
                                    <path d="M21 15H19V17H21V15Z" fill="white"/>
                                </svg>
                                Générer QR Code
                            </button>
                            
                            <div class="qr-container" id="qr-output" style="display: none;">
                                <div class="qr-code" id="qr-code">
                                    <!-- QR code sera généré ici -->
                                </div>
                                <p class="qr-info">
                                    Ce QR code est votre "carte d'identité" de projet. Conservez-le précieusement (impression, stockage sécurisé) pour retrouver votre projet même sans appareil personnel.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Barre d'outils de sélection -->
<div class="selection-toolbar" id="selection-toolbar">
    <div class="selection-counter" id="selection-counter">0/0</div>
    
    <button class="toolbar-btn" id="ctrl-btn" title="Activer/désactiver la sélection multiple">
        <span class="icon modifier-key">Ctrl</span>
        <span>Ctrl</span>
    </button>
    
    <button class="toolbar-btn" id="shift-btn" title="Sélectionner une plage">
        <span class="icon modifier-key">⇧</span>
        <span>Shift</span>
    </button>
    
    <button class="toolbar-btn" id="keyboard-btn" title="Afficher/masquer le clavier">
        <span class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 5H4C2.9 5 2.01 5.9 2.01 7L2 17C2 18.1 2.9 19 4 19H20C21.1 19 22 18.1 22 17V7C22 5.9 21.1 5 20 5ZM11 8H13V10H11V8ZM11 11H13V13H11V11ZM8 8H10V10H8V8ZM8 11H10V13H8V11ZM5 11H7V13H5V11ZM5 8H7V10H5V8ZM8 14H16V16H8V14ZM14 11H16V13H14V11ZM14 8H16V10H14V8ZM17 11H19V13H17V11ZM17 8H19V10H17V8Z" fill="currentColor"/>
            </svg>
        </span>
        <span>Clavier</span>
    </button>
    
    <button class="toolbar-btn" id="copy-btn" title="Copier">
        <span class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z" fill="currentColor"/>
            </svg>
        </span>
        <span>Copier</span>
    </button>
    
    <button class="toolbar-btn" id="cut-btn" title="Couper">
        <span class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9.64 7.64C9.87 7.14 10 6.59 10 6C10 3.79 8.21 2 6 2C3.79 2 2 3.79 2 6C2 8.21 3.79 10 6 10C6.59 10 7.14 9.87 7.64 9.64L10 12L7.64 14.36C7.14 14.13 6.59 14 6 14C3.79 14 2 15.79 2 18C2 20.21 3.79 22 6 22C8.21 22 10 20.21 10 18C10 17.41 9.87 16.86 9.64 16.36L12 14L19 21H22V20L9.64 7.64ZM6 8C4.9 8 4 7.1 4 6C4 4.9 4.9 4 6 4C7.1 4 8 4.9 8 6C8 7.1 7.1 8 6 8ZM6 20C4.9 20 4 19.1 4 18C4 16.9 4.9 16 6 16C7.1 16 8 16.9 8 18C8 19.1 7.1 20 6 20ZM12 12.5C11.72 12.5 11.5 12.28 11.5 12C11.5 11.72 11.72 11.5 12 11.5C12.28 11.5 12.5 11.72 12.5 12C12.5 12.28 12.28 12.5 12 12.5ZM19 3L13 9L15 11L22 4V3H19Z" fill="currentColor"/>
            </svg>
        </span>
        <span>Couper</span>
    </button>
    
    <button class="toolbar-btn disabled" id="paste-btn" title="Coller">
        <span class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 2H5C3.9 2 3 2.9 3 4V20C3 21.1 3.9 22 5 22H19C20.1 22 21 21.1 21 20V4C21 2.9 20.1 2 19 2ZM19 20H5V4H19V20ZM17 19H12V17H17V19ZM7 13H17V11H7V13ZM7 9H17V7H7V9ZM7 17H10V15H7V17Z" fill="currentColor"/>
            </svg>
        </span>
        <span>Coller</span>
    </button>
    
    <button class="toolbar-btn disabled" id="rename-btn" title="Renommer">
        <span class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 17.25V21H6.75L17.81 9.94L14.06 6.19L3 17.25ZM20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C17.98 2.9 17.35 2.9 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04Z" fill="currentColor"/>
            </svg>
        </span>
        <span>Renommer</span>
    </button>
    
    <button class="toolbar-btn" id="details-btn" title="Détails">
        <span class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11 17H13V11H11V17ZM12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM11 9H13V7H11V9Z" fill="currentColor"/>
            </svg>
        </span>
        <span>Détails</span>
    </button>
    
    <button class="toolbar-btn" id="hide-btn" title="Masquer">
        <span class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 6.5C15.79 6.5 19.17 8.63 20.82 12C19.17 15.37 15.8 17.5 12 17.5C8.2 17.5 4.83 15.37 3.18 12C4.83 8.63 8.21 6.5 12 6.5ZM12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 9.5C13.38 9.5 14.5 10.62 14.5 12C14.5 13.38 13.38 14.5 12 14.5C10.62 14.5 9.5 13.38 9.5 12C9.5 10.62 10.62 9.5 12 9.5ZM12 7.5C9.52 7.5 7.5 9.52 7.5 12C7.5 14.48 9.52 16.5 12 16.5C14.48 16.5 16.5 14.48 16.5 12C16.5 9.52 14.48 7.5 12 7.5Z" fill="currentColor"/>
            </svg>
        </span>
        <span>Masquer</span>
    </button>
    
    <button class="toolbar-btn" id="update-link-btn" title="Mettre à jour le lien" style="display: none;">
        <span class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 4V1L8 5L12 9V6C15.31 6 18 8.69 18 12C18 13.01 17.75 13.97 17.3 14.8L18.76 16.26C19.54 15.03 20 13.57 20 12C20 7.58 16.42 4 12 4ZM12 18C8.69 18 6 15.31 6 12C6 10.99 6.25 10.03 6.7 9.2L5.24 7.74C4.46 8.97 4 10.43 4 12C4 16.42 7.58 20 12 20V23L16 19L12 15V18Z" fill="currentColor"/>
            </svg>
        </span>
        <span>Mettre à jour</span>
    </button>
    
    <button class="toolbar-btn" id="copy-link-btn" title="Copier le lien" style="display: none;">
        <span class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17 7H13V9H17C18.65 9 20 10.35 20 12C20 13.65 18.65 15 17 15H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7ZM11 15H7C5.35 15 4 13.65 4 12C4 10.35 5.35 9 7 9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15ZM8 11H16V13H8V11Z" fill="currentColor"/>
            </svg>
        </span>
        <span>Copier URL</span>
    </button>
    
    <button class="toolbar-btn" id="quit-btn" title="Quitter la sélection">
        <span class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="currentColor"/>
            </svg>
        </span>
        <span>Quitter</span>
    </button>
</div>


        <!-- Bottom Nav -->
        <div class="bottom-nav">
            <a href="#accueil" class="nav-item active" data-page="accueil">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z" fill="currentColor"/>
                    </svg>
                </div>
                <div class="nav-label">Accueil</div>
            </a>
            <a href="#explorer" class="nav-item" data-page="explorer">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                    </svg>
                </div>
                <div class="nav-label">Explorateur</div>
            </a>
            <a href="#projet" class="nav-item" data-page="projet">
                <div class="nav-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM7 10H9V17H7V10ZM11 7H13V17H11V7ZM15 13H17V17H15V13Z" fill="currentColor"/>
                    </svg>
                </div>
                <div class="nav-label">Espace Projet</div>
            </a>
        </div>

        <!-- Bottom Sheet -->
        <div class="bottom-sheet" id="add-sheet">
            <div class="bottom-sheet-header">
                <div class="bottom-sheet-handle"></div>
                <h3 class="bottom-sheet-title">Ajouter un élément</h3>
                <button class="btn-icon close-sheet-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
            <div class="bottom-sheet-body">
                <div class="card">
                    <h4>Créer un dossier</h4>
                    <div class="input-group">
                        <input type="text" class="input" id="folder-name" placeholder=" ">
                        <label for="folder-name" class="input-label">Nom du dossier</label>
                    </div>
                    <button class="btn btn-pill">Créer</button>
                </div>
                
                <div class="card">
                    <h4>Ajouter un lien</h4>
                    <div class="input-group">
                        <input type="text" class="input" id="link-name" placeholder=" ">
                        <label for="link-name" class="input-label">Nom du lien</label>
                    </div>
                    <div class="input-group">
                        <input type="url" class="input" id="link-url" placeholder=" ">
                        <label for="link-url" class="input-label">URL</label>
                    </div>
                    <button class="btn btn-pill">Ajouter</button>
                </div>
                
                <div class="card">
                    <h4>Ajouter un texte</h4>
                    <div class="input-group">
                        <input type="text" class="input" id="text-name" placeholder=" ">
                        <label for="text-name" class="input-label">Titre</label>
                    </div>
                    <div class="input-group">
                        <textarea class="input" id="text-content" rows="4" placeholder=" "></textarea>
                        <label for="text-content" class="input-label">Contenu</label>
                    </div>
                    <button class="btn btn-pill">Ajouter</button>
                </div>
            </div>
        </div>

        <!-- Side Panel Actions -->
        <div class="side-panel" id="actions-panel">
            <div class="side-panel-header">
                <h3 class="side-panel-title">Actions</h3>
                <button class="btn-icon close-panel-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
            <div class="side-panel-body">
                <div class="card">
                    <button class="btn btn-pill" id="add-item-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                            <path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" fill="white"/>
                        </svg>
                        Ajouter un élément
                    </button>
                </div>
                
                <div class="card">
                    <h4>Importer/Exporter</h4>
                    <button class="btn" id="import-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                            <path d="M5 20H19V18H5V20ZM19 9H15V3H9V9H5L12 16L19 9Z" fill="white"/>
                        </svg>
                        Importer JSON
                    </button>
                    <button class="btn" id="export-btn" style="margin-top: 8px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                            <path d="M19 9H15V3H9V9H5L12 16L19 9ZM5 18V20H19V18H5Z" fill="white"/>
                        </svg>
                        Exporter JSON
                    </button>
                </div>
                
                <div class="card">
                    <h4>Affichage</h4>
                    <button class="btn btn-flat" id="view-grid-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                            <path d="M3 3V11H11V3H3ZM9 9H5V5H9V9ZM3 13V21H11V13H3ZM9 19H5V15H9V19ZM13 3V11H21V3H13ZM19 9H15V5H19V9ZM13 13V21H21V13H13ZM19 19H15V15H19V19Z" fill="currentColor"/>
                        </svg>
                        Grille
                    </button>
                    <button class="btn btn-flat" id="view-list-btn" style="margin-top: 8px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                            <path d="M3 13H5V11H3V13ZM3 17H5V15H3V17ZM3 9H5V7H3V9ZM7 13H21V11H7V13ZM7 17H21V15H7V17ZM7 7V9H21V7H7Z" fill="currentColor"/>
                        </svg>
                        Liste
                    </button>
                </div>
                
                <div class="card">
                    <h4>Tri</h4>
                    <button class="btn btn-flat" id="sort-az-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                            <path d="M14.94 4.66H19.94L12.94 19.66H7.94L14.94 4.66ZM10.25 19.66V16.05L5.07 7.59H3.25V4.66H11.13V7.59H9.1L14.07 16.05V19.66H10.25Z" fill="currentColor"/>
                        </svg>
                        A → Z
                    </button>
                    <button class="btn btn-flat" id="sort-za-btn" style="margin-top: 8px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                            <path d="M7.41 8.58L12 13.17L16.59 8.58L18 10L12 16L6 10L7.41 8.58Z" fill="currentColor"/>
                        </svg>
                        Z → A
                    </button>
                    <button class="btn btn-flat" id="sort-new-btn" style="margin-top: 8px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                            <path d="M11.99 2C6.47 2 2 6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 11.99 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" fill="currentColor"/>
                        </svg>
                        Plus récent
                    </button>
                    <button class="btn btn-flat" id="sort-old-btn" style="margin-top: 8px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                            <path d="M11.99 2C6.47 2 2 6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 11.99 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20ZM12.5 7H11V13L16.25 16.15L17 14.92L12.5 12.25V7Z" fill="currentColor"/>
                        </svg>
                        Plus ancien
                    </button>
                </div>
                
                <div class="card">
                    <h4>Éléments masqués</h4>
                    <div class="input-group">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="show-hidden" style="margin-right: 8px;">
                            <span>Afficher les éléments masqués</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Container -->
        <div class="toast-container" id="toast-container"></div>

        <!-- Search Panel -->
        <div class="side-panel" id="search-panel">
            <div class="side-panel-header">
                <h3 class="side-panel-title">Recherche</h3>
                <button class="btn-icon close-search-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
            <div class="side-panel-body">
                <div class="input-group">
                    <input type="text" class="input" id="search-input" placeholder=" ">
                    <label for="search-input" class="input-label">Rechercher...</label>
                </div>
                
                <div class="tabs-container">
                    <div class="tabs-header">
                        <div class="tab-item active" data-tab="search-all">Tous</div>
                        <div class="tab-item" data-tab="search-folders">Dossiers</div>
                        <div class="tab-item" data-tab="search-links">Liens</div>
                        <div class="tab-item" data-tab="search-texts">Textes</div>
                    </div>
                    
                    <div class="tabs-content">
                        <div class="tab-panel active" data-tab-content="search-all">
                            <p>Saisissez un terme de recherche ci-dessus.</p>
                        </div>
                        
                        <div class="tab-panel" data-tab-content="search-folders">
                            <p>Recherche limitée aux dossiers.</p>
                        </div>
                        
                        <div class="tab-panel" data-tab-content="search-links">
                            <p>Recherche limitée aux liens.</p>
                        </div>
                        
                        <div class="tab-panel" data-tab-content="search-texts">
                            <p>Recherche limitée aux textes.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Floating Action Button -->
        <div style="position: fixed; right: 1rem; bottom: calc(var(--bottom-nav-height) + 1rem); z-index: 99;">
            <button class="btn-icon" id="fab-btn" style="width: 56px; height: 56px; background-color: var(--accent-color); color: white; box-shadow: var(--shadow-elevation-2);">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" fill="currentColor"/>
                </svg>
            </button>
        </div>
    
    <!-- Nouvelle interface de création d'éléments -->
<div class="creation-overlay" id="creation-overlay">
    <div class="creation-header">
        <div class="back-btn btn-icon" id="creation-back-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z" fill="currentColor"/>
            </svg>
        </div>
        <h3>Ajouter un élément</h3>
        <div class="btn-icon"></div> <!-- Élément vide pour l'équilibre -->
    </div>
    
    <div class="creation-path" id="creation-path">
        Accueil
    </div>
    
    <div class="creation-options">
        <div class="creation-option" id="folder-option">
            <div class="creation-option-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="white"/>
                </svg>
            </div>
            <div class="creation-option-content">
                <div class="creation-option-title">Dossier</div>
                <div class="creation-option-description">Créer un nouveau dossier pour organiser vos liens et fichiers.</div>
            </div>
        </div>
        
        <div class="creation-option" id="link-option">
            <div class="creation-option-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="white"/>
                </svg>
            </div>
            <div class="creation-option-content">
                <div class="creation-option-title">Lien</div>
                <div class="creation-option-description">Ajouter un nouveau lien vers un site web ou une ressource en ligne.</div>
            </div>
        </div>
        
        <div class="creation-option" id="text-option">
            <div class="creation-option-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6C4.9 2 4.01 2.9 4.01 4L4 20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2ZM16 18H8V16H16V18ZM16 14H8V12H16V14ZM13 9V3.5L18.5 9H13Z" fill="white"/>
                </svg>
            </div>
            <div class="creation-option-content">
                <div class="creation-option-title">Texte</div>
                <div class="creation-option-description">Créer une note ou un document texte avec un éditeur complet.</div>
            </div>
        </div>
    </div>
</div>

<!-- Interface de création de dossier -->
<div class="folder-creation" id="folder-creation">
    <div class="creation-header">
        <div class="back-btn btn-icon" id="folder-creation-back-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z" fill="currentColor"/>
            </svg>
        </div>
        <h3>Nouveau dossier</h3>
        <div class="btn-icon"></div>
    </div>
    
    <div class="folder-creation-content">
        <div class="card glass">
            <h3>Créer un dossier</h3>
            <p>Donnez un nom à votre nouveau dossier pour l'organiser.</p>
            <div class="input-group" style="margin-top: 1.5rem;">
                <input type="text" class="input" id="new-folder-name" placeholder=" ">
                <label for="new-folder-name" class="input-label">Nom du dossier</label>
            </div>
        </div>
    </div>
    
    <div class="creation-footer">
        <button class="btn btn-flat" id="folder-creation-cancel">Annuler</button>
        <button class="btn" id="folder-creation-save">Créer</button>
    </div>
</div>

<!-- Interface de création de lien -->
<div class="link-creation" id="link-creation">
    <div class="creation-header">
        <div class="back-btn btn-icon" id="link-creation-back-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z" fill="currentColor"/>
            </svg>
        </div>
        <h3 id="link-creation-title">Nouveau lien - Étape 1/2</h3>
        <div class="btn-icon"></div>
    </div>
    
    <div class="link-creation-content">
        <div class="card glass link-step-1">
            <h3>Entrez le lien</h3>
            <p>Collez l'adresse URL que vous souhaitez enregistrer.</p>
            <div class="input-group" style="margin-top: 1.5rem;">
                <input type="url" class="input" id="new-link-url" placeholder=" ">
                <label for="new-link-url" class="input-label">URL du lien</label>
            </div>
        </div>
        
        <div class="card glass link-step-2" style="display: none;">
            <h3>Nommez votre lien</h3>
            <p>Donnez un nom à ce lien pour le retrouver facilement.</p>
            <div class="input-group" style="margin-top: 1.5rem;">
                <input type="text" class="input" id="new-link-name" placeholder=" ">
                <label for="new-link-name" class="input-label">Nom du lien</label>
            </div>
        </div>
    </div>
    
    <div class="creation-footer">
        <button class="btn btn-flat" id="link-creation-cancel">Annuler</button>
        <button class="btn" id="link-step-next">Continuer</button>
        <button class="btn" id="link-step-save" style="display: none;">Enregistrer</button>
    </div>
</div>

<!-- Interface de création de texte -->
<div class="text-creation" id="text-creation">
    <div class="creation-header">
        <div class="back-btn btn-icon" id="text-creation-back-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z" fill="currentColor"/>
            </svg>
        </div>
        <h3 id="text-creation-title">Nouveau texte</h3>
        <div class="btn-icon" id="text-save-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z" fill="currentColor"/>
            </svg>
        </div>
    </div>
    
    <div class="text-editor-container">
        <div class="text-editor-toolbar">
            <button class="toolbar-btn" data-command="bold">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.6 10.79C16.57 10.12 17.25 9.02 17.25 8C17.25 5.74 15.5 4 13.25 4H7V18H14.04C16.13 18 17.75 16.3 17.75 14.21C17.75 12.69 16.89 11.39 15.6 10.79ZM10 6.5H13C13.83 6.5 14.5 7.17 14.5 8C14.5 8.83 13.83 9.5 13 9.5H10V6.5ZM13.5 15.5H10V12.5H13.5C14.33 12.5 15 13.17 15 14C15 14.83 14.33 15.5 13.5 15.5Z" fill="currentColor"/>
                </svg>
            </button>
            <button class="toolbar-btn" data-command="italic">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 4V7H12.21L8.79 15H6V18H14V15H11.79L15.21 7H18V4H10Z" fill="currentColor"/>
                </svg>
            </button>
            <button class="toolbar-btn" data-command="underline">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 17C15.31 17 18 14.31 18 11V3H15.5V11C15.5 12.93 13.93 14.5 12 14.5C10.07 14.5 8.5 12.93 8.5 11V3H6V11C6 14.31 8.69 17 12 17ZM5 19V21H19V19H5Z" fill="currentColor"/>
                </svg>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <button class="toolbar-btn" data-command="justifyLeft">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 15H3V17H15V15ZM15 7H3V9H15V7ZM3 13H21V11H3V13ZM3 21H21V19H3V21ZM3 3V5H21V3H3Z" fill="currentColor"/>
                </svg>
            </button>
            <button class="toolbar-btn" data-command="justifyCenter">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 15V17H17V15H7ZM3 21H21V19H3V21ZM3 13H21V11H3V13ZM7 7V9H17V7H7ZM3 3V5H21V3H3Z" fill="currentColor"/>
                </svg>
            </button>
            <button class="toolbar-btn" data-command="justifyRight">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 21H21V19H3V21ZM9 17H21V15H9V17ZM3 13H21V11H3V13ZM9 9H21V7H9V9ZM3 3V5H21V3H3Z" fill="currentColor"/>
                </svg>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <button class="toolbar-btn" data-command="insertUnorderedList">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 10.5C3.17 10.5 2.5 11.17 2.5 12C2.5 12.83 3.17 13.5 4 13.5C4.83 13.5 5.5 12.83 5.5 12C5.5 11.17 4.83 10.5 4 10.5ZM4 4.5C3.17 4.5 2.5 5.17 2.5 6C2.5 6.83 3.17 7.5 4 7.5C4.83 7.5 5.5 6.83 5.5 6C5.5 5.17 4.83 4.5 4 4.5ZM4 16.5C3.17 16.5 2.5 17.18 2.5 18C2.5 18.82 3.18 19.5 4 19.5C4.82 19.5 5.5 18.82 5.5 18C5.5 17.18 4.83 16.5 4 16.5ZM7 19H21V17H7V19ZM7 13H21V11H7V13ZM7 5V7H21V5H7Z" fill="currentColor"/>
                </svg>
            </button>
            <button class="toolbar-btn" data-command="insertOrderedList">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 17H4V17.5H3V18.5H4V19H2V20H5V16H2V17ZM3 8H4V4H2V5H3V8ZM2 11H3.8L2 13.1V14H5V13H3.2L5 10.9V10H2V11ZM7 5V7H21V5H7ZM7 19H21V17H7V19ZM7 13H21V11H7V13Z" fill="currentColor"/>
                </svg>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <button class="toolbar-btn" data-command="undo">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12.5 8C9.85 8 7.45 8.99 5.6 10.6L2 7V16H11L7.38 12.38C8.77 11.22 10.54 10.5 12.5 10.5C16.04 10.5 19.05 12.81 20.1 16L22.47 15.22C21.08 11.03 17.15 8 12.5 8Z" fill="currentColor"/>
                </svg>
            </button>
            <button class="toolbar-btn" data-command="redo">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8C6.85 8 2.92 11.03 1.54 15.22L3.9 16C4.95 12.81 7.95 10.5 11.5 10.5C13.45 10.5 15.23 11.22 16.62 12.38L13 16H22V7L18.4 10.6Z" fill="currentColor"/>
                </svg>
            </button>
        </div>
        
        <div class="text-editor" id="text-editor" contenteditable="true"></div>
    </div>
    
    <div class="text-naming-dialog" id="text-naming-dialog" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1200; display: flex; align-items: center; justify-content: center;">
        <div class="card" style="width: 90%; max-width: 400px; padding: 1.5rem;">
            <h3>Enregistrer le texte</h3>
            <p>Donnez un nom à votre note pour la retrouver facilement.</p>
            <div class="input-group" style="margin: 1.5rem 0;">
                <input type="text" class="input" id="new-text-name" placeholder=" ">
                <label for="new-text-name" class="input-label">Nom du document</label>
            </div>
            <div style="display: flex; justify-content: flex-end; gap: 1rem;">
                <button class="btn btn-flat" id="text-naming-cancel">Annuler</button>
                <button class="btn" id="text-naming-save">Enregistrer</button>
            </div>
        </div>
    </div>
</div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Variables for DOM elements
    const app = document.getElementById('app');
    const main = document.querySelector('main');
    const pages = document.querySelectorAll('.page');
    const navItems = document.querySelectorAll('.nav-item, .sidebar-nav-item');
    const sidePanel = document.querySelector('.side-panel');
    const appBar = document.querySelector('.app-bar');
    const toggleSidebarBtn = document.querySelector('.toggle-sidebar-btn');
    const closeSidebarBtn = document.querySelector('.close-sidebar-btn');
    const themeToggleBtn = document.querySelector('.theme-toggle-btn');
    const addSheet = document.getElementById('add-sheet');
    const fabBtn = document.getElementById('fab-btn');
    const closeSheetBtn = document.querySelector('.close-sheet-btn');
    const actionsPanel = document.getElementById('actions-panel');
    const moreBtn = document.querySelector('.more-btn');
    const closePanelBtn = document.querySelector('.close-panel-btn');
    const searchPanel = document.getElementById('search-panel');
    const searchBtn = document.querySelector('.search-btn');
    const closeSearchBtn = document.querySelector('.close-search-btn');
    const tabItems = document.querySelectorAll('.tab-item');
    const accordions = document.querySelectorAll('.accordion-header');
    const treeToggles = document.querySelectorAll('.tree-toggle');
    const toastContainer = document.getElementById('toast-container');
    const generateQrBtn = document.getElementById('generate-qr');
    const qrOutput = document.getElementById('qr-output');
    const qrCode = document.getElementById('qr-code');
    const addItemBtn = document.getElementById('add-item-btn');
    const viewGridBtn = document.getElementById('view-grid-btn');
    const viewListBtn = document.getElementById('view-list-btn');
    
    // Éléments de l'interface de création
    const creationOverlay = document.getElementById('creation-overlay');
    const creationBackBtn = document.getElementById('creation-back-btn');
    const creationPath = document.getElementById('creation-path');
    
    // Options de création
    const folderOption = document.getElementById('folder-option');
    const linkOption = document.getElementById('link-option');
    const textOption = document.getElementById('text-option');
    
    // Interface de création de dossier
    const folderCreation = document.getElementById('folder-creation');
    const folderCreationBackBtn = document.getElementById('folder-creation-back-btn');
    const folderCreationCancel = document.getElementById('folder-creation-cancel');
    const folderCreationSave = document.getElementById('folder-creation-save');
    const newFolderName = document.getElementById('new-folder-name');
    
    // Interface de création de lien
    const linkCreation = document.getElementById('link-creation');
    const linkCreationBackBtn = document.getElementById('link-creation-back-btn');
    const linkCreationCancel = document.getElementById('link-creation-cancel');
    const linkCreationTitle = document.getElementById('link-creation-title');
    const linkStepNext = document.getElementById('link-step-next');
    const linkStepSave = document.getElementById('link-step-save');
    const linkStep1 = document.querySelector('.link-step-1');
    const linkStep2 = document.querySelector('.link-step-2');
    const newLinkUrl = document.getElementById('new-link-url');
    const newLinkName = document.getElementById('new-link-name');
    
    // Interface de création de texte
    const textCreation = document.getElementById('text-creation');
    const textCreationBackBtn = document.getElementById('text-creation-back-btn');
    const textEditor = document.getElementById('text-editor');
    const textSaveBtn = document.getElementById('text-save-btn');
    const textNamingDialog = document.getElementById('text-naming-dialog');
    const textNamingCancel = document.getElementById('text-naming-cancel');
    const textNamingSave = document.getElementById('text-naming-save');
    const newTextName = document.getElementById('new-text-name');
    const toolbarBtns = document.querySelectorAll('.toolbar-btn');
    
    // Mobile detection
    const isMobile = window.innerWidth < 768;
    
    // Initialisation du chemin actuel
    let currentPath = 'Accueil';
    
    // Theme management
    function toggleTheme() {
        const currentTheme = document.body.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        document.body.setAttribute('data-theme', newTheme);
        
        // Show toast
        showToast(newTheme === 'dark' ? 'Mode sombre activé' : 'Mode clair activé');
    }
    
    themeToggleBtn.addEventListener('click', toggleTheme);
    
    // Page navigation
    function navigateTo(pageId) {
        pages.forEach(page => {
            if (page.id === pageId) {
                page.classList.add('active');
                page.classList.remove('previous');
            } else {
                if (page.classList.contains('active')) {
                    page.classList.add('previous');
                } else {
                    page.classList.remove('previous');
                }
                page.classList.remove('active');
            }
        });
        
        navItems.forEach(item => {
            if (item.getAttribute('data-page') === pageId) {
                item.classList.add('active');
            } else {
                item.classList.remove('active');
            }
        });
        
        // On mobile, close the side panel after navigation
        if (isMobile && sidePanel.classList.contains('open')) {
            sidePanel.classList.remove('open');
        }
    }
    
    navItems.forEach(item => {
        item.addEventListener('click', (e) => {
            e.preventDefault();
            const pageId = item.getAttribute('data-page');
            navigateTo(pageId);
            history.pushState({ page: pageId }, '', item.getAttribute('href'));
        });
    });
    
    // Handle browser back/forward
    window.addEventListener('popstate', (e) => {
        if (e.state && e.state.page) {
            navigateTo(e.state.page);
        }
    });
    
    // Side panel toggle
    function toggleSidePanel() {
        if (window.innerWidth >= 1024) {
            // Desktop behavior - toggle collapsed state
            sidePanel.classList.toggle('collapsed');
            appBar.classList.toggle('full-width');
            main.classList.toggle('full-width');
        } else {
            // Mobile behavior - open/close panel
            sidePanel.classList.toggle('open');
        }
    }
    
    toggleSidebarBtn.addEventListener('click', toggleSidePanel);
    closeSidebarBtn.addEventListener('click', () => {
        if (window.innerWidth < 1024) {
            sidePanel.classList.remove('open');
        }
    });
    
    // Nouvelle interface de création d'éléments
    function showCreationOverlay() {
        // Mettre à jour le chemin actuel
        creationPath.textContent = currentPath;
        
        // Afficher l'interface de création
        creationOverlay.classList.add('active');
        
        // Masquer le bottom sheet obsolète
        if (addSheet.classList.contains('open')) {
            addSheet.classList.remove('open');
        }
    }
    
    function hideCreationOverlay() {
        creationOverlay.classList.remove('active');
    }
    
    // Gestionnaires d'événements pour l'interface de création
    creationBackBtn.addEventListener('click', hideCreationOverlay);
    
    // Option de création de dossier
    folderOption.addEventListener('click', () => {
        folderCreation.classList.add('active');
        setTimeout(() => {
            newFolderName.focus();
        }, 300);
    });
    
    folderCreationBackBtn.addEventListener('click', () => {
        folderCreation.classList.remove('active');
    });
    
    folderCreationCancel.addEventListener('click', () => {
        folderCreation.classList.remove('active');
        hideCreationOverlay();
    });
    
    folderCreationSave.addEventListener('click', () => {
        const folderName = newFolderName.value.trim();
        
        if (folderName) {
            // Simuler la création du dossier
            showToast(`Dossier "${folderName}" créé avec succès`, 'success');
            
            // Réinitialiser le champ
            newFolderName.value = '';
            
            // Fermer les interfaces
            folderCreation.classList.remove('active');
            hideCreationOverlay();
        } else {
            showToast('Veuillez entrer un nom de dossier', 'error');
        }
    });
    
    // Option de création de lien
    linkOption.addEventListener('click', () => {
        // Réinitialiser à l'étape 1
        linkCreationTitle.textContent = 'Nouveau lien - Étape 1/2';
        linkStep1.style.display = 'block';
        linkStep2.style.display = 'none';
        linkStepNext.style.display = 'block';
        linkStepSave.style.display = 'none';
        
        linkCreation.classList.add('active');
        setTimeout(() => {
            newLinkUrl.focus();
        }, 300);
    });
    
    linkCreationBackBtn.addEventListener('click', () => {
        // Vérifier si on est à l'étape 2, revenir à l'étape 1
        if (linkStep2.style.display === 'block') {
            linkCreationTitle.textContent = 'Nouveau lien - Étape 1/2';
            linkStep1.style.display = 'block';
            linkStep2.style.display = 'none';
            linkStepNext.style.display = 'block';
            linkStepSave.style.display = 'none';
        } else {
            // Sinon, revenir à la sélection du type
            linkCreation.classList.remove('active');
        }
    });
    
    linkCreationCancel.addEventListener('click', () => {
        linkCreation.classList.remove('active');
        hideCreationOverlay();
    });
    
    linkStepNext.addEventListener('click', () => {
        const linkUrl = newLinkUrl.value.trim();
        
        if (linkUrl) {
            // Passer à l'étape 2
            linkCreationTitle.textContent = 'Nouveau lien - Étape 2/2';
            linkStep1.style.display = 'none';
            linkStep2.style.display = 'block';
            linkStepNext.style.display = 'none';
            linkStepSave.style.display = 'block';
            
            // Focus sur le nom du lien
            setTimeout(() => {
                newLinkName.focus();
                
                // Essayer d'extraire un nom à partir de l'URL
                try {
                    const url = new URL(linkUrl);
                    newLinkName.value = url.hostname.replace('www.', '');
                } catch (e) {
                    // URL invalide, ignorer
                }
            }, 300);
        } else {
            showToast('Veuillez entrer une URL valide', 'error');
        }
    });
    
    linkStepSave.addEventListener('click', () => {
        const linkUrl = newLinkUrl.value.trim();
        const linkName = newLinkName.value.trim();
        
        if (linkUrl && linkName) {
            // Simuler l'ajout du lien
            showToast(`Lien "${linkName}" ajouté avec succès`, 'success');
            
            // Réinitialiser les champs
            newLinkUrl.value = '';
            newLinkName.value = '';
            
            // Fermer les interfaces
            linkCreation.classList.remove('active');
            hideCreationOverlay();
        } else {
            showToast('Veuillez remplir tous les champs', 'error');
        }
    });
    
    // Option de création de texte
    textOption.addEventListener('click', () => {
        textCreation.classList.add('active');
        setTimeout(() => {
            textEditor.focus();
        }, 300);
    });
    
    textCreationBackBtn.addEventListener('click', () => {
        if (textEditor.textContent.trim() !== '') {
            if (confirm('Voulez-vous quitter sans enregistrer votre texte ?')) {
                textEditor.innerHTML = '';
                textCreation.classList.remove('active');
            }
        } else {
            textCreation.classList.remove('active');
        }
    });
    
    // Fonctionnalités de l'éditeur de texte
    toolbarBtns.forEach(button => {
        button.addEventListener('click', () => {
            const command = button.getAttribute('data-command');
            
            if (command) {
                document.execCommand(command, false, null);
                textEditor.focus();
            }
        });
    });
    
    // Enregistrement du texte
    textSaveBtn.addEventListener('click', () => {
        if (textEditor.innerHTML.trim() === '') {
            showToast('Veuillez écrire du texte avant d\'enregistrer', 'error');
            return;
        }
        
        textNamingDialog.style.display = 'flex';
        setTimeout(() => {
            newTextName.focus();
        }, 300);
    });
    
    textNamingCancel.addEventListener('click', () => {
        textNamingDialog.style.display = 'none';
    });
    
    textNamingSave.addEventListener('click', () => {
        const textName = newTextName.value.trim();
        
        if (textName) {
            // Simuler l'enregistrement du texte
            showToast(`Texte "${textName}" enregistré avec succès`, 'success');
            
            // Réinitialiser les champs
            textEditor.innerHTML = '';
            newTextName.value = '';
            
            // Fermer les interfaces
            textNamingDialog.style.display = 'none';
            textCreation.classList.remove('active');
            hideCreationOverlay();
        } else {
            showToast('Veuillez entrer un nom pour votre texte', 'error');
        }
    });
    
    // Remplacer les événements du bouton d'ajout et du bottom sheet
    fabBtn.addEventListener('click', showCreationOverlay);
    addItemBtn.addEventListener('click', () => {
        actionsPanel.classList.remove('open');
        showCreationOverlay();
    });
    
    // Bottom sheet
    function toggleBottomSheet() {
        addSheet.classList.toggle('open');
    }
    
    closeSheetBtn.addEventListener('click', toggleBottomSheet);
    
    // Actions panel
    moreBtn.addEventListener('click', () => {
        actionsPanel.classList.add('open');
    });
    
    closePanelBtn.addEventListener('click', () => {
        actionsPanel.classList.remove('open');
    });
    
    // Search panel
    searchBtn.addEventListener('click', () => {
        searchPanel.classList.add('open');
        document.getElementById('search-input').focus();
    });
    
    closeSearchBtn.addEventListener('click', () => {
        searchPanel.classList.remove('open');
    });
    
    // Tabs interface
tabItems.forEach(tab => {
    tab.addEventListener('click', () => {
        const tabGroup = tab.parentElement.querySelectorAll('.tab-item');
        const tabId = tab.getAttribute('data-tab');
        const tabContent = document.querySelectorAll(`[data-tab-content="${tabId}"]`);
        
        tabGroup.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        const allTabContent = document.querySelectorAll(`[data-tab-content]`);
        allTabContent.forEach(content => {
            if (content.getAttribute('data-tab-content') === tabId) {
                content.classList.add('active');
                
                // Réinitialiser le contenu de l'onglet à son état par défaut
                resetTabContent(tabId);
            } else {
                content.classList.remove('active');
            }
        });
        
        // Réinitialiser le chemin dans le fil d'Ariane
        resetBreadcrumb();
        
        // Réinitialiser le chemin actuel
        currentPath = 'Accueil';
    });
});

// Ajoutez cette fonction pour réinitialiser le contenu des onglets
function resetTabContent(tabId) {
    let content = '';
    
    switch(tabId) {
        case 'all':
            content = `
                <div class="items-grid">
                    <div class="explorer-item" data-type="folder">
                        <div class="item-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="item-name">Projets Web</div>
                    </div>
                    
                    <div class="explorer-item" data-type="folder">
                        <div class="item-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="item-name">Tutoriels</div>
                    </div>
                    
                    <div class="explorer-item" data-type="link">
                        <div class="item-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="item-name">MDN Web Docs</div>
                    </div>
                    
                    <div class="explorer-item" data-type="link">
                        <div class="item-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="item-name">GitHub</div>
                    </div>
                    
                    <div class="explorer-item" data-type="text">
                        <div class="item-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 2H6C4.9 2 4.01 2.9 4.01 4L4 20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2ZM16 18H8V16H16V18ZM16 14H8V12H16V14ZM13 9V3.5L18.5 9H13Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="item-name">Notes JavaScript</div>
                    </div>
                </div>
            `;
            break;
            
        case 'folders':
            content = `
                <div class="items-grid">
                    <div class="explorer-item" data-type="folder">
                        <div class="item-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="item-name">Projets Web</div>
                    </div>
                    
                    <div class="explorer-item" data-type="folder">
                        <div class="item-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="item-name">Tutoriels</div>
                    </div>
                </div>
            `;
            break;
            
        case 'links':
            content = `
                <div class="items-grid">
                    <div class="explorer-item" data-type="link">
                        <div class="item-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="item-name">MDN Web Docs</div>
                    </div>
                    
                    <div class="explorer-item" data-type="link">
                        <div class="item-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12C20.1 13.71 18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="item-name">GitHub</div>
                    </div>
                </div>
            `;
            break;
            
        case 'texts':
            content = `
                <div class="items-grid">
                    <div class="explorer-item" data-type="text">
                        <div class="item-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 2H6C4.9 2 4.01 2.9 4.01 4L4 20C4 21.1 4.89 22 5.99 22H18C19.1 22 20 21.1 20 20V8L14 2ZM16 18H8V16H16V18ZM16 14H8V12H16V14ZM13 9V3.5L18.5 9H13Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="item-name">Notes JavaScript</div>
                    </div>
                </div>
            `;
            break;
    }
    
    const tabPanel = document.querySelector(`[data-tab-content="${tabId}"]`);
    if (tabPanel) {
        tabPanel.innerHTML = content;
        
        // Réattacher les gestionnaires d'événements aux éléments de l'explorateur
        attachExplorerItemEvents();
    }
}

// Ajoutez cette fonction pour réinitialiser le fil d'Ariane
function resetBreadcrumb() {
    const breadcrumb = document.querySelector('.path-breadcrumb');
    
    // Conserver uniquement le premier élément (Accueil) et supprimer les autres
    const homeItem = breadcrumb.querySelector('.path-item');
    breadcrumb.innerHTML = '';
    
    if (homeItem) {
        // Créer une copie de l'élément d'accueil pour éviter des problèmes avec les références
        const newHomeItem = homeItem.cloneNode(true);
        newHomeItem.classList.add('active');
        breadcrumb.appendChild(newHomeItem);
    } else {
        // Si pour une raison quelconque l'élément d'accueil n'est pas trouvé, créer un nouveau
        const newHomeItem = document.createElement('div');
        newHomeItem.className = 'path-item active';
        newHomeItem.innerHTML = `
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z" fill="currentColor"/>
            </svg>
            <span>Accueil</span>
        `;
        breadcrumb.appendChild(newHomeItem);
    }
}

// Fonction pour attacher les gestionnaires d'événements aux éléments de l'explorateur
function attachExplorerItemEvents() {
    const explorerItems = document.querySelectorAll('.explorer-item');
    
    explorerItems.forEach(item => {
        // Empêcher la sélection de texte par défaut
        item.addEventListener('selectstart', e => e.preventDefault());
        
        // Événement pour le clic long (mobile)
        let longPressTimer;
        
        item.addEventListener('touchstart', e => {
            longPressTimer = setTimeout(() => {
                e.preventDefault();
                if (typeof selectItem === 'function') {
                    selectItem(item);
                }
            }, 500); // 500ms pour un clic long
        });
        
        item.addEventListener('touchend', () => {
            clearTimeout(longPressTimer);
        });
        
        item.addEventListener('touchmove', () => {
            clearTimeout(longPressTimer);
        });
        
        // Événement pour le clic droit (desktop)
        item.addEventListener('contextmenu', e => {
            e.preventDefault();
            if (typeof selectItem === 'function') {
                selectItem(item);
            }
        });
        
        // Événement pour le clic simple
        item.addEventListener('click', (e) => {
            // Si le mode sélection est activé, le clic sélectionne l'élément
            if (typeof isSelectionMode !== 'undefined' && isSelectionMode) {
                e.stopPropagation(); // Empêcher la navigation
                if (typeof selectItem === 'function') {
                    selectItem(item, true);
                }
                return;
            }
            
            const type = item.getAttribute('data-type');
            const name = item.querySelector('.item-name').textContent;
            
            if (type === 'folder') {
                // Mettre à jour le chemin actuel
                currentPath = currentPath + ' / ' + name;
                
                // Update breadcrumb
                const breadcrumb = document.querySelector('.path-breadcrumb');
                const currentItems = breadcrumb.querySelectorAll('.path-item');
                
                // Remove active class from current
                currentItems.forEach(item => item.classList.remove('active'));
                
                // Add new breadcrumb item
                const newItem = document.createElement('div');
                newItem.className = 'path-item active';
                newItem.innerHTML = `
                    <span class="path-separator">/</span>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                    </svg>
                    <span>${name}</span>
                `;
                
                breadcrumb.appendChild(newItem);
                
                // Show empty folder message
                const tabContent = document.querySelector('.tab-panel.active');
                if (tabContent) {
                    tabContent.innerHTML = `
                        <div class="empty-folder-message" style="text-align: center; padding: 3rem 0;">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-bottom: 1rem; opacity: 0.6;">
                                <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                            </svg>
                            <p>Ce dossier est vide</p>
                            <button class="btn btn-pill add-empty-folder-btn" style="margin-top: 1rem;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                                    <path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" fill="white"/>
                                </svg>
                                Ajouter un élément
                            </button>
                        </div>
                    `;
                    
                    // Ajouter un gestionnaire pour le nouveau bouton d'ajout
                    const addEmptyFolderBtn = document.querySelector('.add-empty-folder-btn');
                    if (addEmptyFolderBtn && typeof showCreationOverlay === 'function') {
                        addEmptyFolderBtn.addEventListener('click', showCreationOverlay);
                    }
                }
            } else if (type === 'link') {
                showToast(`Ouverture du lien: ${name}`);
            } else if (type === 'text') {
                showToast(`Ouverture du texte: ${name}`);
            }
        });
    });
}

    
    // Accordions
    accordions.forEach(accordion => {
        accordion.addEventListener('click', () => {
            const parent = accordion.parentElement;
            parent.classList.toggle('active');
        });
    });
    
    // File tree toggles
    treeToggles.forEach(toggle => {
        toggle.addEventListener('click', () => {
            toggle.classList.toggle('open');
        });
    });
    
    // Show toast message
    function showToast(message, type = 'default') {
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        let icon = '';
        if (type === 'success') {
            icon = `<svg class="toast-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z" fill="currentColor"/>
            </svg>`;
        } else if (type === 'error') {
            icon = `<svg class="toast-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11 15H13V17H11V15ZM11 7H13V13H11V7ZM12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z" fill="currentColor"/>
            </svg>`;
        }
        
        toast.innerHTML = `
            ${icon}
            <div class="toast-message">${message}</div>
        `;
        
        toastContainer.appendChild(toast);
        
        // Remove toast after 3 seconds
        setTimeout(() => {
            toast.style.opacity = '0';
            toast.style.transform = 'translateY(100%)';
            
            // Remove from DOM after animation
            setTimeout(() => {
                toast.remove();
            }, 300);
        }, 3000);
    }
    
    // QR code generator (simulated)
    generateQrBtn.addEventListener('click', () => {
        const projectLink = document.getElementById('project-link').value;
        
        if (!projectLink) {
            showToast('Veuillez entrer un lien valide', 'error');
            return;
        }
        
        // Simple QR code simulation
        qrCode.innerHTML = `
            <div style="width: 100%; height: 100%; display: grid; grid-template-columns: repeat(5, 1fr); grid-template-rows: repeat(5, 1fr); gap: 4px;">
                ${Array(25).fill().map((_, i) => {
                    // Generate a random pattern that looks like a QR code
                    const shouldFill = Math.random() > 0.5;
                    return `<div style="background-color: ${shouldFill ? 'black' : 'white'};"></div>`;
                }).join('')}
            </div>
        `;
        
        qrOutput.style.display = 'flex';
        showToast('QR code généré avec succès', 'success');
    });
    
    // Change view mode (grid/list)
    viewGridBtn.addEventListener('click', () => {
        const itemsContainer = document.querySelector('.items-grid');
        if (itemsContainer) {
            itemsContainer.classList.remove('items-list');
            itemsContainer.classList.add('items-grid');
        }
        showToast('Vue en grille activée');
    });
    
    viewListBtn.addEventListener('click', () => {
        const itemsContainer = document.querySelector('.items-grid');
        if (itemsContainer) {
            itemsContainer.classList.remove('items-grid');
            itemsContainer.classList.add('items-list');
        }
        showToast('Vue en liste activée');
    });
    
    // Export button simulation
    const exportBtn = document.getElementById('export-btn');
    if (exportBtn) {
        exportBtn.addEventListener('click', () => {
            // Get current date and time for filename
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            
            const fileName = `backup_${year}-${month}-${day}_${hours}-${minutes}-${seconds}.json`;
            
            showToast(`Fichier ${fileName} exporté avec succès`, 'success');
        });
    }
    
    // Import button simulation
    const importBtn = document.getElementById('import-btn');
    if (importBtn) {
        importBtn.addEventListener('click', () => {
            showToast('Importation de fichier JSON réussie', 'success');
        });
    }
    
    // Initialize page based on URL hash
    const initPage = () => {
        let pageId = 'accueil'; // Default
        const hash = window.location.hash;
        
        if (hash) {
            const targetPageId = hash.substring(1);
            const targetPage = document.getElementById(targetPageId);
            
            if (targetPage) {
                pageId = targetPageId;
            }
        }
        
        navigateTo(pageId);
        history.replaceState({ page: pageId }, '', `#${pageId}`);
    };
    
    initPage();
    
    // App bar scroll effect
    window.addEventListener('scroll', () => {
        if (window.scrollY > 10) {
            appBar.classList.add('scrolled');
        } else {
            appBar.classList.remove('scrolled');
        }
    });
    
    // Handle resize
    window.addEventListener('resize', () => {
        const isNowMobile = window.innerWidth < 768;
        
        if (isNowMobile !== isMobile) {
            location.reload(); // Reload to adapt layout correctly
        }
    });
    
// Explorer items click handler
const explorerItems = document.querySelectorAll('.explorer-item');
explorerItems.forEach(item => {
    item.addEventListener('click', (e) => {
        // Si nous sommes en mode sélection, ne pas exécuter le comportement normal
        if (isSelectionMode) {
            return;
        }
        
        const type = item.getAttribute('data-type');
        const name = item.querySelector('.item-name').textContent;
        
        if (type === 'folder') {
            // Mettre à jour le chemin actuel
            currentPath = currentPath + ' / ' + name;
            
            // Update breadcrumb
            const breadcrumb = document.querySelector('.path-breadcrumb');
            const currentItems = breadcrumb.querySelectorAll('.path-item');
            
            // Remove active class from current
            currentItems.forEach(item => item.classList.remove('active'));
            
            // Add new breadcrumb item
            const newItem = document.createElement('div');
            newItem.className = 'path-item active';
            newItem.innerHTML = `
                <span class="path-separator">/</span>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                </svg>
                <span>${name}</span>
            `;
            
            breadcrumb.appendChild(newItem);
            
            // Show empty folder message
            const tabContent = document.querySelector('.tab-panel.active');
            if (tabContent) {
                tabContent.innerHTML = `
                    <div class="empty-folder-message" style="text-align: center; padding: 3rem 0;">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-bottom: 1rem; opacity: 0.6;">
                            <path d="M10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6H12L10 4Z" fill="currentColor"/>
                        </svg>
                        <p>Ce dossier est vide</p>
                        <button class="btn btn-pill add-empty-folder-btn" style="margin-top: 1rem;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 8px;">
                                <path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" fill="white"/>
                            </svg>
                            Ajouter un élément
                        </button>
                    </div>
                `;
                
                // Ajouter un gestionnaire pour le nouveau bouton d'ajout
                const addEmptyFolderBtn = document.querySelector('.add-empty-folder-btn');
                if (addEmptyFolderBtn) {
                    addEmptyFolderBtn.addEventListener('click', showCreationOverlay);
                }
            }
        } else if (type === 'link') {
            showToast(`Ouverture du lien: ${name}`);
        } else if (type === 'text') {
            showToast(`Ouverture du texte: ${name}`);
        }
    });
});

    
    // Fonction pour ajuster la hauteur du conteneur tabs-content
    function adjustExplorerHeight() {
        const explorerContainer = document.querySelector('.explorer-container');
        const tabsContainer = document.querySelector('.tabs-container');
        const bottomNav = document.querySelector('.bottom-nav');
        const appBar = document.querySelector('.app-bar');
        
        if (explorerContainer && tabsContainer) {
            const windowHeight = window.innerHeight;
            const bottomNavHeight = bottomNav ? bottomNav.offsetHeight : 0;
            const appBarHeight = appBar ? appBar.offsetHeight : 0;
            
            // Calculer la hauteur disponible
            const availableHeight = windowHeight - appBarHeight - bottomNavHeight - 20; // 20px pour les marges
            
            // Appliquer la hauteur
            explorerContainer.style.maxHeight = `${availableHeight}px`;
            tabsContainer.style.maxHeight = `${availableHeight - 60}px`; // 60px pour breadcrumb et autres éléments
        }
    }
    
    // Appeler la fonction lors du chargement et du redimensionnement
    adjustExplorerHeight();
    window.addEventListener('resize', adjustExplorerHeight);
    
    // Appeler également lors du changement d'onglet dans l'explorateur
    document.querySelectorAll('.tab-item[data-tab]').forEach(tab => {
        tab.addEventListener('click', () => {
            setTimeout(adjustExplorerHeight, 100); // Délai pour permettre le rendu
        });
    });

          
          // Système de sélection d'éléments
const selectionToolbar = document.getElementById('selection-toolbar');
const selectionCounter = document.getElementById('selection-counter');
const ctrlBtn = document.getElementById('ctrl-btn');
const shiftBtn = document.getElementById('shift-btn');
const keyboardBtn = document.getElementById('keyboard-btn');
const copyBtn = document.getElementById('copy-btn');
const cutBtn = document.getElementById('cut-btn');
const pasteBtn = document.getElementById('paste-btn');
const renameBtn = document.getElementById('rename-btn');
const detailsBtn = document.getElementById('details-btn');
const hideBtn = document.getElementById('hide-btn');
const updateLinkBtn = document.getElementById('update-link-btn');
const copyLinkBtn = document.getElementById('copy-link-btn');
const quitBtn = document.getElementById('quit-btn');

// Variables pour la gestion de la sélection
let isSelectionMode = false;
let isCtrlActive = false;
let isShiftActive = false;
let selectedItems = [];
let lastSelectedItem = null;
let clipboardItems = [];
let clipboardOperation = null; // 'copy' ou 'cut'

// Initialisation du compteur de sélection
function updateSelectionCounter() {
    const totalItems = document.querySelectorAll('.explorer-item').length;
    selectionCounter.textContent = `${selectedItems.length}/${totalItems}`;
}

// Fonction pour activer/désactiver le mode sélection
function toggleSelectionMode(activate = true) {
    isSelectionMode = activate;
    
    if (activate) {
        selectionToolbar.classList.add('visible');
        updateSelectionCounter();
    } else {
        selectionToolbar.classList.remove('visible');
        clearSelection();
        isCtrlActive = false;
        isShiftActive = false;
        ctrlBtn.classList.remove('active');
        shiftBtn.classList.remove('active');
    }
}

// Fonction pour mettre à jour les boutons de la barre d'outils
function updateToolbarButtons() {
    // Activation/désactivation du bouton "Renommer" (seulement si un élément est sélectionné)
    if (selectedItems.length === 1) {
        renameBtn.classList.remove('disabled');
    } else {
        renameBtn.classList.add('disabled');
    }
    
    // Gestion des options spécifiques aux liens
    const hasLinkSelected = selectedItems.some(item => item.getAttribute('data-type') === 'link');
    const hasSingleLinkSelected = selectedItems.length === 1 && selectedItems[0].getAttribute('data-type') === 'link';
    
    updateLinkBtn.style.display = hasSingleLinkSelected ? 'flex' : 'none';
    copyLinkBtn.style.display = hasLinkSelected ? 'flex' : 'none';
    
    // Activation/désactivation du bouton "Coller"
    if (clipboardItems.length > 0) {
        pasteBtn.classList.remove('disabled');
    } else {
        pasteBtn.classList.add('disabled');
    }
}

// Fonction pour sélectionner un élément
function selectItem(item, addToSelection = false) {
    if (!isSelectionMode) {
        toggleSelectionMode(true);
    }
    
    // Si la touche Ctrl n'est pas active et qu'on n'ajoute pas explicitement à la sélection
    if (!isCtrlActive && !addToSelection && !isShiftActive) {
        clearSelection();
    }
    
    // Gestion de la touche Shift
    if (isShiftActive && lastSelectedItem) {
        const allItems = Array.from(document.querySelectorAll('.explorer-item'));
        const currentIndex = allItems.indexOf(item);
        const lastIndex = allItems.indexOf(lastSelectedItem);
        
        // Sélectionner tous les éléments entre lastSelectedItem et item
        const startIdx = Math.min(currentIndex, lastIndex);
        const endIdx = Math.max(currentIndex, lastIndex);
        
        for (let i = startIdx; i <= endIdx; i++) {
            if (!selectedItems.includes(allItems[i])) {
                selectedItems.push(allItems[i]);
                allItems[i].classList.add('selected');
            }
        }
    } else {
        // Gestion normale de la sélection (simple ou avec Ctrl)
        if (selectedItems.includes(item)) {
            // Désélectionner si déjà sélectionné avec Ctrl
            if (isCtrlActive) {
                const index = selectedItems.indexOf(item);
                selectedItems.splice(index, 1);
                item.classList.remove('selected');
            }
        } else {
            selectedItems.push(item);
            item.classList.add('selected');
        }
    }
    
    lastSelectedItem = item;
    updateSelectionCounter();
    updateToolbarButtons();
}

// Fonction pour effacer la sélection
function clearSelection() {
    selectedItems.forEach(item => {
        item.classList.remove('selected');
    });
    selectedItems = [];
    lastSelectedItem = null;
    updateSelectionCounter();
    updateToolbarButtons();
}

// Événements pour les éléments de l'explorateur
document.querySelectorAll('.explorer-item').forEach(item => {
    // Empêcher la sélection de texte par défaut
    item.addEventListener('selectstart', e => e.preventDefault());
    
    // Événement pour le clic long (mobile)
    let longPressTimer;
    
    item.addEventListener('touchstart', e => {
        longPressTimer = setTimeout(() => {
            e.preventDefault();
            selectItem(item);
        }, 500); // 500ms pour un clic long
    });
    
    item.addEventListener('touchend', () => {
        clearTimeout(longPressTimer);
    });
    
    item.addEventListener('touchmove', () => {
        clearTimeout(longPressTimer);
    });
    
    // Événement pour le clic droit (desktop)
    item.addEventListener('contextmenu', e => {
        e.preventDefault();
        selectItem(item);
    });
    
    // Événement pour le clic simple
    item.addEventListener('click', e => {
        // Si le mode sélection est activé, le clic sélectionne l'élément
        if (isSelectionMode) {
            e.stopPropagation(); // Empêcher la navigation
            selectItem(item, true);
        }
    });
});

// Événement pour désactiver le mode sélection lors d'un clic ailleurs
document.addEventListener('click', e => {
    if (isSelectionMode && !e.target.closest('.explorer-item') && !e.target.closest('.selection-toolbar')) {
        if (!isCtrlActive) {
            toggleSelectionMode(false);
        }
    }
});

// Événements pour les boutons de la barre d'outils
ctrlBtn.addEventListener('click', () => {
    isCtrlActive = !isCtrlActive;
    ctrlBtn.classList.toggle('active', isCtrlActive);
    
    if (isCtrlActive) {
        isShiftActive = false;
        shiftBtn.classList.remove('active');
    }
});

shiftBtn.addEventListener('click', () => {
    isShiftActive = !isShiftActive;
    shiftBtn.classList.toggle('active', isShiftActive);
    
    if (isShiftActive) {
        isCtrlActive = false;
        ctrlBtn.classList.remove('active');
    }
});

keyboardBtn.addEventListener('click', () => {
    // Pour simuler l'affichage/masquage du clavier virtuel
    showToast('Fonctionnalité clavier à implémenter');
});

copyBtn.addEventListener('click', () => {
    if (selectedItems.length === 0) return;
    
    clipboardItems = [...selectedItems];
    clipboardOperation = 'copy';
    pasteBtn.classList.remove('disabled');
    
    copyBtn.classList.add('disabled');
    cutBtn.classList.add('disabled');
    
    showToast(`${selectedItems.length} élément(s) copié(s)`, 'success');
});

cutBtn.addEventListener('click', () => {
    if (selectedItems.length === 0) return;
    
    clipboardItems = [...selectedItems];
    clipboardOperation = 'cut';
    pasteBtn.classList.remove('disabled');
    
    copyBtn.classList.add('disabled');
    cutBtn.classList.add('disabled');
    
    showToast(`${selectedItems.length} élément(s) coupé(s)`, 'success');
});

pasteBtn.addEventListener('click', () => {
    if (clipboardItems.length === 0) return;
    
    showToast(`${clipboardItems.length} élément(s) collé(s)`, 'success');
    
    // Réactiver les boutons après collage
    copyBtn.classList.remove('disabled');
    cutBtn.classList.remove('disabled');
    
    // Dans une implémentation réelle, il faudrait créer des copies des éléments
    // Pour l'instant, on se contente de simuler
    
    // Si l'opération était "cut", on pourrait vouloir supprimer les originaux
    if (clipboardOperation === 'cut') {
        // Dans une implémentation réelle
    }
});

renameBtn.addEventListener('click', () => {
    if (selectedItems.length !== 1) return;
    
    // Simuler la boîte de dialogue de renommage
    const itemName = selectedItems[0].querySelector('.item-name').textContent;
    const newName = prompt('Renommer:', itemName);
    
    if (newName && newName !== itemName) {
        selectedItems[0].querySelector('.item-name').textContent = newName;
        showToast(`Élément renommé en "${newName}"`, 'success');
    }
});

detailsBtn.addEventListener('click', () => {
    if (selectedItems.length === 0) return;
    
    // Afficher les détails (simulation)
    const types = selectedItems.map(item => item.getAttribute('data-type'));
    const uniqueTypes = [...new Set(types)];
    
    showToast(`Détails de ${selectedItems.length} élément(s): ${uniqueTypes.join(', ')}`, 'success');
});

hideBtn.addEventListener('click', () => {
    if (selectedItems.length === 0) return;
    
    selectedItems.forEach(item => {
        item.style.opacity = '0.5';
    });
    
    showToast(`${selectedItems.length} élément(s) masqué(s)`, 'success');
    toggleSelectionMode(false);
});

updateLinkBtn.addEventListener('click', () => {
    if (selectedItems.length !== 1 || selectedItems[0].getAttribute('data-type') !== 'link') return;
    
    // Simuler la mise à jour du lien
    const newUrl = prompt('Entrez la nouvelle URL:');
    if (newUrl) {
        showToast('Lien mis à jour avec succès', 'success');
    }
});

copyLinkBtn.addEventListener('click', () => {
    if (!selectedItems.some(item => item.getAttribute('data-type') === 'link')) return;
    
    // Simuler la copie de l'URL
    showToast('URL copiée dans le presse-papier', 'success');
});

quitBtn.addEventListener('click', () => {
    toggleSelectionMode(false);
});

// Support des raccourcis clavier
document.addEventListener('keydown', e => {
    if (e.key === 'Escape') {
        if (isSelectionMode) {
            toggleSelectionMode(false);
        }
    }
    
    if (isSelectionMode) {
        if (e.key === 'a' && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            // Sélectionner tous les éléments
            const allItems = document.querySelectorAll('.explorer-item');
            clearSelection();
            allItems.forEach(item => {
                selectedItems.push(item);
                item.classList.add('selected');
            });
            lastSelectedItem = selectedItems[0];
            updateSelectionCounter();
            updateToolbarButtons();
        }
        
        if (e.key === 'c' && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            copyBtn.click();
        }
        
        if (e.key === 'x' && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            cutBtn.click();
        }
        
        if (e.key === 'v' && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            if (!pasteBtn.classList.contains('disabled')) {
                pasteBtn.click();
            }
        }
    }
});

        });

    </script>
</body>
</html>
