<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projet.JL - Gestionnaire de Liens et Notes</title>
    <style>
        :root {
            /* Dynamic Colors - Material You Dark Theme */
            --primary: #BB86FC;
            --primary-variant: #3700B3;
            --secondary: #03DAC6;
            --background: #121212;
            --surface: #1E1E1E;
            --surface-1: #2D2D2D;
            --surface-2: #333333;
            --error: #CF6679;
            --on-primary: #000000;
            --on-secondary: #000000;
            --on-background: #FFFFFF;
            --on-surface: #FFFFFF;
            --on-error: #000000;
            --shadow-color: rgba(0, 0, 0, 0.5);
            
            /* Typography */
            --font-primary: 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-md: 1rem;
            --font-size-lg: 1.25rem;
            --font-size-xl: 1.5rem;
            --font-size-xxl: 2rem;
            
            /* Spacing & Layout */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-xxl: 3rem;
            --border-radius-sm: 4px;
            --border-radius-md: 8px;
            --border-radius-lg: 16px;
            --border-radius-xl: 24px;
            --border-radius-circle: 50%;
            
            /* Animation */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.25s ease;
            --transition-slow: 0.5s ease;
            
            /* Elevation */
            --elevation-1: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            --elevation-2: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
            --elevation-3: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
            --elevation-4: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
            --elevation-5: 0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22);
        }

        /* Light theme variables */
        [data-theme="light"] {
            --primary: #6200EE;
            --primary-variant: #3700B3;
            --secondary: #03DAC5;
            --background: #F5F5F5;
            --surface: #FFFFFF;
            --surface-1: #F5F5F5;
            --surface-2: #EEEEEE;
            --error: #B00020;
            --on-primary: #FFFFFF;
            --on-secondary: #000000;
            --on-background: #000000;
            --on-surface: #000000;
            --on-error: #FFFFFF;
            --shadow-color: rgba(0, 0, 0, 0.2);
        }

        /* Global styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            font-family: var(--font-primary);
            background-color: var(--background);
            color: var(--on-background);
            transition: background-color var(--transition-normal),
                        color var(--transition-normal);
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        body {
            display: flex;
            flex-direction: column;
            user-select: none;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--surface);
            border-radius: var(--border-radius-lg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-variant);
            border-radius: var(--border-radius-lg);
            border: 2px solid var(--surface);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            margin-bottom: var(--spacing-md);
            font-weight: 500;
            line-height: 1.2;
        }

        h1 { font-size: var(--font-size-xxl); }
        h2 { font-size: var(--font-size-xl); }
        h3 { font-size: var(--font-size-lg); }
        h4 { font-size: var(--font-size-md); }
        h5 { font-size: var(--font-size-sm); }
        h6 { font-size: var(--font-size-xs); }

        p {
            margin-bottom: var(--spacing-md);
            line-height: 1.6;
        }

        a {
            color: var(--primary);
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        a:hover {
            color: var(--secondary);
            text-decoration: underline;
        }

        /* App container */
        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100%;
            max-width: 100%;
            position: relative;
            overflow: hidden;
        }

        /* App bar */
        .app-bar {
            display: flex;
            align-items: center;
            height: 64px;
            padding: 0 var(--spacing-md);
            background-color: var(--surface);
            color: var(--on-surface);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--elevation-1);
            transition: all var(--transition-normal);
        }

        .app-bar.compact {
            height: 48px;
        }

        .app-bar.expanded {
            height: 128px;
        }

        .app-bar-title {
            font-size: var(--font-size-lg);
            font-weight: 500;
            flex: 1;
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .app-bar .btn-icon {
            margin-left: var(--spacing-sm);
        }

        .sub-toolbar {
            display: flex;
            align-items: center;
            height: 48px;
            padding: 0 var(--spacing-md);
            background-color: var(--surface-1);
            color: var(--on-surface);
            border-bottom: 1px solid var(--surface-2);
            overflow-x: auto;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            flex-wrap: nowrap;
            overflow-x: auto;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }

        .breadcrumb::-webkit-scrollbar {
            display: none; /* Chrome, Safari and Opera */
        }

        .breadcrumb-item {
            display: flex;
            align-items: center;
            white-space: nowrap;
            color: var(--on-surface);
            opacity: 0.7;
        }

        .breadcrumb-item.active {
            opacity: 1;
            font-weight: 500;
            color: var(--primary);
        }

        .breadcrumb-separator {
            margin: 0 var(--spacing-xs);
            opacity: 0.5;
        }

        /* Content area */
        .content {
            flex: 1;
            padding: var(--spacing-md);
            overflow-y: auto;
            position: relative;
        }

        /* Bottom navigation */
        .bottom-nav {
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 60px;
            background-color: var(--surface);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            bottom: 0;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            height: 100%;
            color: var(--on-surface);
            opacity: 0.7;
            transition: opacity var(--transition-fast), color var(--transition-fast);
            text-decoration: none;
        }

        .nav-item.active {
            color: var(--primary);
            opacity: 1;
        }

        .nav-item-icon {
            font-size: 24px;
            margin-bottom: var(--spacing-xs);
        }

        .nav-item-label {
            font-size: var(--font-size-xs);
            text-align: center;
        }

        /* Components */
        .card {
            background-color: var(--surface);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
            box-shadow: var(--elevation-1);
            transition: transform var(--transition-normal), box-shadow var(--transition-normal);
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--elevation-2);
        }

        .folder-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: var(--spacing-md);
            margin-top: var(--spacing-lg);
        }

        .list-view .folder-grid {
            grid-template-columns: 1fr;
            gap: var(--spacing-sm);
        }

        .folder-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--spacing-md);
            background-color: var(--surface);
            border-radius: var(--border-radius-md);
            transition: all var(--transition-normal);
            cursor: pointer;
            position: relative;
        }

        .folder-item:hover {
            background-color: var(--surface-1);
        }

        .folder-item.selected {
            background-color: rgba(var(--primary-rgb), 0.2);
            outline: 2px solid var(--primary);
        }

        .list-view .folder-item {
            flex-direction: row;
            padding: var(--spacing-sm);
            align-items: center;
            justify-content: flex-start;
        }

        .folder-icon {
            font-size: 48px;
            color: var(--primary);
            margin-bottom: var(--spacing-sm);
        }

        .list-view .folder-icon {
            font-size: 24px;
            margin-bottom: 0;
            margin-right: var(--spacing-md);
        }

        .folder-name {
            text-align: center;
            font-size: var(--font-size-sm);
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .list-view .folder-name {
            text-align: left;
            flex: 1;
        }

        .folder-options {
            position: absolute;
            top: var(--spacing-sm);
            right: var(--spacing-sm);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .folder-item:hover .folder-options {
            opacity: 1;
        }

        .list-view .folder-options {
            position: relative;
            top: auto;
            right: auto;
            opacity: 1;
        }

        /* Bottom sheet */
        .bottom-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--surface);
            border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
            box-shadow: var(--elevation-3);
            z-index: 1000;
            transform: translateY(100%);
            transition: transform var(--transition-normal);
            touch-action: none;
            max-height: 80vh;
            overflow-y: auto;
        }

        .bottom-sheet.visible {
            transform: translateY(0);
        }

        .bottom-sheet-handle {
            width: 40px;
            height: 5px;
            border-radius: 2.5px;
            background-color: var(--surface-2);
            margin: var(--spacing-sm) auto;
        }

        .bottom-sheet-content {
            padding: var(--spacing-md);
        }

        /* Side panel */
        .side-panel {
            position: fixed;
            top: 0;
            right: 0;
            height: 100%;
            width: 300px;
            background-color: var(--surface);
            box-shadow: var(--elevation-4);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform var(--transition-normal);
            display: flex;
            flex-direction: column;
        }

        .side-panel.visible {
            transform: translateX(0);
        }

        .side-panel-header {
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--surface-2);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .side-panel-title {
            margin: 0;
            font-size: var(--font-size-lg);
        }

        .side-panel-close {
            cursor: pointer;
            opacity: 0.7;
            transition: opacity var(--transition-fast);
        }

        .side-panel-close:hover {
            opacity: 1;
        }

        .side-panel-content {
            flex: 1;
            padding: var(--spacing-md);
            overflow-y: auto;
        }

        /* Modal dialog */
        .dialog-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity var(--transition-normal);
        }

        .dialog-backdrop.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .dialog {
            background-color: var(--surface);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--elevation-4);
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.9);
            opacity: 0;
            transition: transform var(--transition-normal), opacity var(--transition-normal);
        }

        .dialog-backdrop.visible .dialog {
            transform: scale(1);
            opacity: 1;
        }

        .dialog-header {
            padding: var(--spacing-lg) var(--spacing-lg) var(--spacing-sm);
        }

        .dialog-title {
            margin: 0;
            font-size: var(--font-size-lg);
        }

        .dialog-content {
            padding: var(--spacing-sm) var(--spacing-lg);
        }

        .dialog-footer {
            padding: var(--spacing-md) var(--spacing-lg);
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-md);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--border-radius-md);
            font-size: var(--font-size-sm);
            font-weight: 500;
            cursor: pointer;
            transition: background-color var(--transition-fast), color var(--transition-fast);
            border: none;
            outline: none;
            background: none;
            text-transform: uppercase;
        }

        .btn-primary {
            background-color: var(--primary);
            color: var(--on-primary);
        }

        .btn-primary:hover {
            background-color: var(--primary-variant);
        }

        .btn-secondary {
            background-color: var(--surface-1);
            color: var(--on-surface);
        }

        .btn-secondary:hover {
            background-color: var(--surface-2);
        }

        .btn-text {
            color: var(--primary);
            background: none;
        }

        .btn-text:hover {
            background-color: rgba(var(--primary-rgb), 0.1);
        }

        .btn-pill {
            border-radius: 50px;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--border-radius-circle);
            padding: 0;
            font-size: var(--font-size-lg);
            background: none;
            color: var(--on-surface);
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-icon:hover {
            background-color: var(--surface-2);
        }

        .btn-icon.active {
            color: var(--primary);
        }

        .btn-fab {
            position: fixed;
            bottom: 80px;
            right: var(--spacing-md);
            width: 56px;
            height: 56px;
            border-radius: var(--border-radius-circle);
            background-color: var(--primary);
            color: var(--on-primary);
            box-shadow: var(--elevation-3);
            z-index: 90;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all var(--transition-normal);
        }

        .btn-fab:hover {
            background-color: var(--primary-variant);
            box-shadow: var(--elevation-4);
            transform: translateY(-2px);
        }

        /* Form elements */
        .form-group {
            margin-bottom: var(--spacing-md);
        }

        .form-label {
            display: block;
            margin-bottom: var(--spacing-xs);
            font-size: var(--font-size-sm);
            color: var(--on-surface);
            opacity: 0.7;
        }

        .form-control {
            width: 100%;
            padding: var(--spacing-md);
            border: none;
            border-bottom: 2px solid var(--surface-2);
            background-color: var(--surface-1);
            color: var(--on-surface);
            border-radius: var(--border-radius-sm);
            font-size: var(--font-size-md);
            transition: all var(--transition-fast);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            background-color: var(--surface);
        }

        /* Search bar */
        .search-bar {
            display: flex;
            align-items: center;
            background-color: var(--surface-1);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
        }

        .search-bar-icon {
            margin: 0 var(--spacing-sm);
            color: var(--on-surface);
            opacity: 0.7;
        }

        .search-bar-input {
            flex: 1;
            border: none;
            background: none;
            color: var(--on-surface);
            padding: var(--spacing-sm);
            font-size: var(--font-size-md);
        }

        .search-bar-input:focus {
            outline: none;
        }

        /* Tab navigation */
        .tab-bar {
            display: flex;
            background-color: var(--surface);
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .tab-bar::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: var(--spacing-md) var(--spacing-lg);
            white-space: nowrap;
            color: var(--on-surface);
            opacity: 0.7;
            transition: all var(--transition-normal);
            position: relative;
            cursor: pointer;
        }

        .tab.active {
            color: var(--primary);
            opacity: 1;
        }

        .tab.active::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--primary);
        }

        /* Accordion */
        .accordion {
            margin-bottom: var(--spacing-md);
        }

        .accordion-header {
            padding: var(--spacing-md);
            background-color: var(--surface);
            border-radius: var(--border-radius-md);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: background-color var(--transition-fast);
        }

        .accordion-header:hover {
            background-color: var(--surface-1);
        }

        .accordion-title {
            margin: 0;
            font-size: var(--font-size-md);
            font-weight: 500;
        }

        .accordion-icon {
            transition: transform var(--transition-normal);
        }

        .accordion.open .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height var(--transition-normal);
            background-color: var(--surface-1);
            border-radius: 0 0 var(--border-radius-md) var(--border-radius-md);
        }

        .accordion.open .accordion-content {
            max-height: 1000px;
        }

        .accordion-body {
            padding: var(--spacing-md);
        }

        /* QR Code */
        .qr-code-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: var(--spacing-xl) 0;
        }

        .qr-code {
            padding: var(--spacing-md);
            background-color: white;
            border-radius: var(--border-radius-md);
            box-shadow: var(--elevation-2);
        }

        /* Tree view */
        .tree-view {
            margin: var(--spacing-md) 0;
        }

        .tree-item {
            margin: var(--spacing-xs) 0;
            padding-left: var(--spacing-md);
        }

        .tree-parent {
            cursor: pointer;
            display: flex;
            align-items: center;
            padding: var(--spacing-xs) 0;
        }

        .tree-icon {
            margin-right: var(--spacing-sm);
            transition: transform var(--transition-normal);
        }

        .tree-parent.open .tree-icon {
            transform: rotate(90deg);
        }

        .tree-children {
            max-height: 0;
            overflow: hidden;
            transition: max-height var(--transition-normal);
        }

        .tree-parent.open + .tree-children {
            max-height: 1000px;
        }

        /* Glassmorphism */
        .glass {
            background: rgba(var(--surface-rgb), 0.5);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Neumorphism */
        .neumorphic {
            background: var(--surface);
            box-shadow: 
                10px 10px 20px rgba(0, 0, 0, 0.2),
                -10px -10px 20px rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-md);
        }

        /* Loading spinner */
        .spinner {
            width: 40px;
            height: 40px;
            margin: var(--spacing-md) auto;
            border-radius: 50%;
            border: 3px solid rgba(var(--primary-rgb), 0.3);
            border-top-color: var(--primary);
            animation: spinner 1s linear infinite;
        }

        @keyframes spinner {
            to { transform: rotate(360deg); }
        }

        /* Page transitions */
        .page-transition {
            animation: fade-in var(--transition-normal);
        }

        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Media queries for responsive design */
        @media (min-width: 600px) {
            .folder-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            }

            .btn-fab {
                bottom: 32px;
            }

            .bottom-nav {
                height: 72px;
            }
        }

        @media (min-width: 960px) {
            .app-container {
                flex-direction: row;
            }

            .side-nav {
                width: 240px;
                height: 100%;
                background-color: var(--surface);
                border-right: 1px solid var(--surface-2);
                position: sticky;
                top: 0;
                display: flex;
                flex-direction: column;
                z-index: 90;
            }

            .side-nav-header {
                padding: var(--spacing-md);
                height: 64px;
                display: flex;
                align-items: center;
                border-bottom: 1px solid var(--surface-2);
            }

            .side-nav-content {
                flex: 1;
                padding: var(--spacing-md);
                overflow-y: auto;
            }

            .side-nav-item {
                display: flex;
                align-items: center;
                padding: var(--spacing-md);
                border-radius: var(--border-radius-md);
                margin-bottom: var(--spacing-sm);
                color: var(--on-surface);
                opacity: 0.7;
                transition: all var(--transition-fast);
                cursor: pointer;
            }

            .side-nav-item:hover {
                background-color: var(--surface-1);
                opacity: 1;
            }

            .side-nav-item.active {
                background-color: rgba(var(--primary-rgb), 0.1);
                color: var(--primary);
                opacity: 1;
            }

            .side-nav-icon {
                margin-right: var(--spacing-md);
            }

            .content-wrapper {
                flex: 1;
                display: flex;
                flex-direction: column;
                min-height: 100vh;
            }

            .bottom-nav {
                display: none;
            }

            .btn-fab {
                bottom: 32px;
            }
        }

        /* Utils */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-1 { margin-top: var(--spacing-xs); }
        .mt-2 { margin-top: var(--spacing-sm); }
        .mt-3 { margin-top: var(--spacing-md); }
        .mt-4 { margin-top: var(--spacing-lg); }
        .mt-5 { margin-top: var(--spacing-xl); }

        .mb-1 { margin-bottom: var(--spacing-xs); }
        .mb-2 { margin-bottom: var(--spacing-sm); }
        .mb-3 { margin-bottom: var(--spacing-md); }
        .mb-4 { margin-bottom: var(--spacing-lg); }
        .mb-5 { margin-bottom: var(--spacing-xl); }

        .ml-1 { margin-left: var(--spacing-xs); }
        .ml-2 { margin-left: var(--spacing-sm); }
        .ml-3 { margin-left: var(--spacing-md); }
        .ml-4 { margin-left: var(--spacing-lg); }
        .ml-5 { margin-left: var(--spacing-xl); }

        .mr-1 { margin-right: var(--spacing-xs); }
        .mr-2 { margin-right: var(--spacing-sm); }
        .mr-3 { margin-right: var(--spacing-md); }
        .mr-4 { margin-right: var(--spacing-lg); }
        .mr-5 { margin-right: var(--spacing-xl); }

        .d-flex { display: flex; }
        .align-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .flex-column { flex-direction: column; }
        .flex-wrap { flex-wrap: wrap; }
        .flex-1 { flex: 1; }
    </style>
</head>
<body data-theme="dark">
    <div class="app-container">
        <!-- Desktop Side Navigation (visible on large screens) -->
        <nav class="side-nav d-none d-md-flex">
            <div class="side-nav-header">
                <h2>Projet.JL</h2>
            </div>
            <div class="side-nav-content">
                <div class="side-nav-item active" data-page="home">
                    <span class="side-nav-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                    </span>
                    Accueil
                </div>
                <div class="side-nav-item" data-page="explorer">
                    <span class="side-nav-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                        </svg>
                    </span>
                    Explorateur
                </div>
                <div class="side-nav-item" data-page="project">
                    <span class="side-nav-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                            <line x1="8" y1="21" x2="16" y2="21"></line>
                            <line x1="12" y1="17" x2="12" y2="21"></line>
                        </svg>
                    </span>
                    Espace Projet
                </div>
            </div>
        </nav>

        <!-- Content Wrapper -->
        <div class="content-wrapper">
            <!-- App Bar -->
            <div class="app-bar">
                <button class="btn-icon menu-toggle d-md-none">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <h1 class="app-bar-title">Projet.JL</h1>
                <button class="btn-icon theme-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="theme-icon-dark">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="theme-icon-light hidden">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>

            <!-- Sub Toolbar (for Explorer) -->
            <div class="sub-toolbar hidden" id="explorer-toolbar">
                <div class="breadcrumb">
                    <div class="breadcrumb-item active" data-path="/">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                    </div>
                </div>
                <div class="flex-1"></div>
                <button class="btn-icon view-toggle ml-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                </button>
                <button class="btn-icon sort-toggle ml-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="7 8 3 12 7 16"></polyline>
                        <polyline points="17 8 21 12 17 16"></polyline>
                        <line x1="14" y1="4" x2="10" y2="20"></line>
                    </svg>
                </button>
                <button class="btn-icon search-toggle ml-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </button>
            </div>

            <!-- Main Content Area -->
            <main class="content">
                <!-- Home Page -->
                <div class="page page-home page-transition">
                    <div class="card neumorphic mb-4">
                        <h2>Bienvenue sur Projet.JL</h2>
                        <p class="mb-3">Une application de stockage cloud avec une capacité de stockage ♾️ infinie.</p>
                        
                        <div class="accordion">
                            <div class="accordion-header">
                                <h4 class="accordion-title">Qu'est-ce que le projet JL?</h4>
                                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="6 9 12 15 18 9"></polyline>
                                </svg>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <p>Le projet JL est un projet conçu par Jean-Louis LIKULA pour résoudre un problème spécifique : la conservation efficace des liens web.</p>
                                    <p>À la différence des gestionnaires de fichiers classiques qui sont limités au stockage de médias traditionnels et contraints par l'espace disque, Projet.JL vous offre un espace infini pour stocker vos précieux liens web et notes associées.</p>
                                </div>
                            </div>
                        </div>

                        <div class="accordion mt-2">
                            <div class="accordion-header">
                                <h4 class="accordion-title">Mes motivations</h4>
                                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="6 9 12 15 18 9"></polyline>
                                </svg>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <p>L'infinité du monde web représente pour moi ce qu'il y a de plus vaste dans notre monde connecté. Il existe un nombre incalculable de ressources à découvrir, et tout passe par un simple chemin : un lien web.</p>
                                    <p>Vous n'imaginez pas combien de merveilles j'ai pu découvrir grâce à de simples liens, qui sont juste une sorte de textes courts mais qui ouvrent des possibilités immenses.</p>
                                    <p>Malheureusement, j'ai aussi perdu beaucoup de ces ressources précieuses car je n'avais pas d'endroit dédié pour les stocker. Les gestionnaires de fichiers classiques ne sont pas adaptés à cette réalité, car ils sont limités et dépendants de supports physiques.</p>
                                    <p>J'ai donc créé ce système qui est :</p>
                                    <ul>
                                        <li>Toujours accessible (n'importe où, n'importe quand)</li>
                                        <li>Non limité, indépendant des contraintes systèmes</li>
                                        <li>Disponible hors-ligne</li>
                                        <li>Totalement contrôlé par l'utilisateur</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="accordion mt-2">
                            <div class="accordion-header">
                                <h4 class="accordion-title">Comment utiliser ce projet ?</h4>
                                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="6 9 12 15 18 9"></polyline>
                                </svg>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <p>Pour commencer à utiliser Projet.JL :</p>
                                    <ol>
                                        <li>Naviguez vers l'explorateur et commencez à créer des dossiers, ajouter des liens ou des textes</li>
                                        <li>Avant de quitter l'application, <strong>n'oubliez pas d'exporter</strong> votre base de données au format JSON</li>
                                        <li>Stockez ce fichier JSON dans le dossier "data" à la racine de votre projet</li>
                                    </ol>

                                    <p class="mt-3">Structure recommandée pour votre projet :</p>
                                    
                                    <div class="tree-view mt-3">
                                        <div class="tree-parent open">
                                            <span class="tree-icon">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <polyline points="9 18 15 12 9 6"></polyline>
                                                </svg>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                                            </svg>
                                            votre-projet
                                        </div>
                                        <div class="tree-children">
                                            <div class="tree-parent open">
                                                <span class="tree-icon">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <polyline points="9 18 15 12 9 6"></polyline>
                                                    </svg>
                                                </span>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                                                </svg>
                                                data
                                            </div>
                                            <div class="tree-children">
                                                <div class="tree-item">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                                        <polyline points="14 2 14 8 20 8"></polyline>
                                                        <path d="M10 12a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2h-4z"></path>
                                                    </svg>
                                                    backup_2025-11-01_10-30-45.json
                                                </div>
                                            </div>
                                            <div class="tree-item">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                                    <polyline points="14 2 14 8 20 8"></polyline>
                                                    <path d="M12 18v-6M9 15h6"></path>
                                                </svg>
                                                index.html
                                            </div>
                                            <div class="tree-item">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                                    <polyline points="14 2 14 8 20 8"></polyline>
                                                    <path d="M20 14v-4H8a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11"></path>
                                                </svg>
                                                styles.css
                                            </div>
                                            <div class="tree-item">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                                    <polyline points="14 2 14 8 20 8"></polyline>
                                                    <circle cx="10" cy="13" r="2"></circle>
                                                    <path d="M8 21v-5h4v5M16 13h.01M16 17h.01"></path>
                                                </svg>
                                                scripts.js
                                            </div>
                                        </div>
                                    </div>

                                    <p class="mt-3">Le format par défaut de sauvegarde est <code>backup_YYYY-MM-DD_HH-MM-SS.json</code>, ce qui vous permet de retrouver facilement la date et l'heure de chaque sauvegarde.</p>
                                    <p>Lorsque vous changez d'appareil ou de navigateur, utilisez simplement l'option "Importer" pour restaurer vos données à partir de votre fichier JSON.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Explorer Page -->
                <div class="page page-explorer hidden page-transition">
                    <div class="search-bar hidden">
                        <span class="search-bar-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                        </span>
                        <input type="text" class="search-bar-input" placeholder="Rechercher...">
                        <span class="search-bar-icon search-close">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </span>
                    </div>

                    <div class="tab-bar hidden">
                        <div class="tab active" data-filter="all">Tous</div>
                        <div class="tab" data-filter="folder">Dossiers</div>
                        <div class="tab" data-filter="link">Liens</div>
                        <div class="tab" data-filter="text">Textes</div>
                    </div>

                    <div class="folder-grid">
                        <!-- Empty state -->
                        <div class="text-center empty-state" style="grid-column: 1 / -1; padding: 3rem 1rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 1rem;">
                                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                            </svg>
                            <h3>Aucun élément</h3>
                            <p>Commencez à créer des dossiers et à ajouter des liens ou des textes.</p>
                            <button class="btn btn-primary btn-pill mt-3" id="create-first-item">Créer un élément</button>
                        </div>
                        
                        <!-- Sample folder items that will be populated dynamically -->
                    </div>

                    <!-- Floating Action Button -->
                    <div class="btn-fab" id="fab-add">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                    </div>
                </div>

                <!-- Project Page -->
                <div class="page page-project hidden page-transition">
                    <div class="card glass mb-4">
                        <h2>Espace Projet</h2>
                        <p>Cette section est cruciale pour la préservation de votre projet. Elle vous permettra de garder un accès permanent à vos données, même en cas d'oubli de vos identifiants de stockage cloud.</p>
                        
                        <div class="alert neumorphic mt-3 mb-3" style="padding: 15px; border-left: 4px solid var(--primary);">
                            <p><strong>Conseil important :</strong> Pour une sécurité optimale, stockez toujours votre projet en ligne dans plusieurs emplacements cloud, et rendez-le public pour y avoir accès sans authentification. Mettez à jour régulièrement vos fichiers JSON qui représentent votre base de données.</p>
                        </div>
                    </div>

                    <div class="card neumorphic">
                        <h3>Générer un QR code d'accès à votre projet</h3>
                        <p>Insérez le lien de la plateforme où vous avez stocké votre projet pour générer un QR code d'accès rapide.</p>

                        <div class="form-group mt-3">
                            <label class="form-label" for="project-url">URL de votre projet</label>
                            <input type="url" id="project-url" class="form-control" placeholder="https://github.com/username/projet-jl">
                        </div>

                        <button class="btn btn-primary mt-2" id="generate-qr">Générer QR Code</button>

                        <div class="qr-code-container hidden">
                            <div class="qr-code" id="qr-code">
                                <!-- QR code will be generated here -->
                            </div>
                            <p class="mt-3 text-center">Conservez ce QR code comme carte d'accès à votre projet</p>
                        </div>

                        <div class="mt-4">
                            <h4>Plateformes recommandées</h4>
                            <div class="accordion mt-2">
                                <div class="accordion-header">
                                    <h5 class="accordion-title">GitHub</h5>
                                    <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </div>
                                <div class="accordion-content">
                                    <div class="accordion-body">
                                        <p>GitHub est idéal pour le stockage de code source. Votre projet sera versionné et facilement accessible via une URL stable. Pensez à créer un dépôt public pour y accéder sans authentification.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="accordion">
                                <div class="accordion-header">
                                    <h5 class="accordion-title">Plateformes IPFS</h5>
                                    <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </div>
                                <div class="accordion-content">
                                    <div class="accordion-body">
                                        <p>L'IPFS (InterPlanetary File System) est un protocole décentralisé pour stocker et partager des données. Contrairement aux solutions cloud classiques, IPFS distribue vos données sur plusieurs serveurs, les rendant pratiquement indestructibles.</p>
                                        <p>Services recommandés :</p>
                                        <ul>
                                            <li><strong>Web3.storage</strong> - Stockage gratuit et facile à utiliser</li>
                                            <li><strong>NFT.storage</strong> - Orienté stockage de contenu persistant</li>
                                            <li><strong>Pinata Cloud</strong> - Service professionnel avec options gratuites et premium</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="accordion">
                                <div class="accordion-header">
                                    <h5 class="accordion-title">Google Drive</h5>
                                    <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </div>
                                <div class="accordion-content">
                                    <div class="accordion-body">
                                        <p>Google Drive offre un stockage fiable et la possibilité de partager des liens publics. Assurez-vous de configurer correctement les droits d'accès pour que votre projet soit accessible sans authentification.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="accordion">
                                <div class="accordion-header">
                                    <h5 class="accordion-title">MEGA / Mediafire</h5>
                                    <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </div>
                                <div class="accordion-content">
                                    <div class="accordion-body">
                                        <p>Ces plateformes offrent un hébergement de fichiers facile avec des liens de partage publics. Elles sont simples à utiliser mais pensez à vérifier régulièrement que vos liens sont toujours actifs.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Bottom Navigation (mobile only) -->
            <nav class="bottom-nav d-md-none">
                <a class="nav-item active" data-page="home">
                    <span class="nav-item-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                    </span>
                    <span class="nav-item-label">Accueil</span>
                </a>
                <a class="nav-item" data-page="explorer">
                    <span class="nav-item-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                        </svg>
                    </span>
                    <span class="nav-item-label">Explorateur</span>
                </a>
                <a class="nav-item" data-page="project">
                    <span class="nav-item-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                            <line x1="8" y1="21" x2="16" y2="21"></line>
                            <line x1="12" y1="17" x2="12" y2="21"></line>
                        </svg>
                    </span>
                    <span class="nav-item-label">Projet</span>
                </a>
            </nav>
        </div>
    </div>

    <!-- Modals and Bottom Sheets -->
    <div class="bottom-sheet" id="add-sheet">
        <div class="bottom-sheet-handle"></div>
        <div class="bottom-sheet-content">
            <h3 class="mb-3">Ajouter un élément</h3>
            <div class="d-flex mb-4">
                <button class="btn btn-primary flex-1 mr-2" id="add-folder">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                    Dossier
                </button>
                <button class="btn btn-primary flex-1 ml-2" id="add-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                    </svg>
                    Lien
                </button>
            </div>
            <div class="d-flex">
                <button class="btn btn-primary flex-1 mr-2" id="add-text">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                        <line x1="17" y1="10" x2="3" y2="10"></line>
                        <line x1="21" y1="6" x2="3" y2="6"></line>
                        <line x1="21" y1="14" x2="3" y2="14"></line>
                        <line x1="17" y1="18" x2="3" y2="18"></line>
                    </svg>
                    Texte
                </button>
                <button class="btn btn-primary flex-1 ml-2" id="import-data">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    Importer
                </button>
            </div>
            <div class="d-flex mt-3">
                <button class="btn btn-secondary flex-1" id="export-data">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 5 17 10"></polyline>
                        <line x1="12" y1="5" x2="12" y2="17"></line>
                    </svg>
                    Exporter
                </button>
            </div>
        </div>
    </div>

    <div class="dialog-backdrop" id="folder-dialog">
        <div class="dialog">
            <div class="dialog-header">
                <h3 class="dialog-title">Nouveau dossier</h3>
            </div>
            <div class="dialog-content">
                <div class="form-group">
                    <label class="form-label" for="folder-name">Nom du dossier</label>
                    <input type="text" id="folder-name" class="form-control" placeholder="Entrez le nom du dossier">
                </div>
            </div>
            <div class="dialog-footer">
                <button class="btn btn-text" id="folder-cancel">Annuler</button>
                <button class="btn btn-primary" id="folder-create">Créer</button>
            </div>
        </div>
    </div>

    <div class="dialog-backdrop" id="link-dialog">
        <div class="dialog">
            <div class="dialog-header">
                <h3 class="dialog-title">Nouveau lien</h3>
            </div>
            <div class="dialog-content">
                <div class="form-group">
                    <label class="form-label" for="link-title">Titre du lien</label>
                    <input type="text" id="link-title" class="form-control" placeholder="Entrez un titre">
                </div>
                <div class="form-group">
                    <label class="form-label" for="link-url">URL</label>
                    <input type="url" id="link-url" class="form-control" placeholder="https://exemple.com">
                </div>
            </div>
            <div class="dialog-footer">
                <button class="btn btn-text" id="link-cancel">Annuler</button>
                <button class="btn btn-primary" id="link-create">Ajouter</button>
            </div>
        </div>
    </div>

    <div class="dialog-backdrop" id="text-dialog">
        <div class="dialog">
            <div class="dialog-header">
                <h3 class="dialog-title">Nouveau texte</h3>
            </div>
            <div class="dialog-content">
                <div class="form-group">
                    <label class="form-label" for="text-title">Titre</label>
                    <input type="text" id="text-title" class="form-control" placeholder="Entrez un titre">
                </div>
                <div class="form-group">
                    <label class="form-label" for="text-content">Contenu</label>
                    <textarea id="text-content" class="form-control" rows="5" placeholder="Entrez votre texte ici..."></textarea>
                </div>
            </div>
            <div class="dialog-footer">
                <button class="btn btn-text" id="text-cancel">Annuler</button>
                <button class="btn btn-primary" id="text-create">Ajouter</button>
            </div>
        </div>
    </div>

    <div class="side-panel" id="options-panel">
        <div class="side-panel-header">
            <h3 class="side-panel-title">Options</h3>
            <span class="side-panel-close">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </span>
        </div>
        <div class="side-panel-content">
            <div class="form-group">
                <label class="form-label">Trier par</label>
                <div class="d-flex mb-2">
                    <button class="btn btn-secondary flex-1 mr-1 sort-option" data-sort="name-asc">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        </svg>
                        A-Z
                    </button>
                    <button class="btn btn-secondary flex-1 ml-1 sort-option" data-sort="name-desc">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        </svg>
                        Z-A
                    </button>
                </div>
                <div class="d-flex">
                    <button class="btn btn-secondary flex-1 mr-1 sort-option" data-sort="date-asc">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        Ancien
                    </button>
                    <button class="btn btn-secondary flex-1 ml-1 sort-option" data-sort="date-desc">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        Récent
                    </button>
                </div>
            </div>

            <div class="form-group mt-4">
                <label class="form-label">Affichage</label>
                <div class="d-flex">
                    <button class="btn btn-secondary flex-1 mr-1 view-option active" data-view="grid">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                        </svg>
                        Grille
                    </button>
                    <button class="btn btn-secondary flex-1 ml-1 view-option" data-view="list">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="8" y1="6" x2="21" y2="6"></line>
                            <line x1="8" y1="12" x2="21" y2="12"></line>
                            <line x1="8" y1="18" x2="21" y2="18"></line>
                            <line x1="3" y1="6" x2="3.01" y2="6"></line>
                            <line x1="3" y1="12" x2="3.01" y2="12"></line>
                            <line x1="3" y1="18" x2="3.01" y2="18"></line>
                        </svg>
                        Liste
                    </button>
                </div>
            </div>

            <div class="form-group mt-4">
                <div class="d-flex align-center">
                    <input type="checkbox" id="show-hidden" class="mr-2">
                    <label for="show-hidden">Afficher les éléments masqués</label>
                </div>
            </div>

            <div class="mt-5">
                <button class="btn btn-text" id="select-all">Sélectionner tout</button>
                <button class="btn btn-text" id="select-none">Annuler la sélection</button>
            </div>
        </div>
    </div>

    <div class="dialog-backdrop" id="item-options-dialog">
        <div class="dialog">
            <div class="dialog-header">
                <h3 class="dialog-title" id="item-title">Titre de l'élément</h3>
            </div>
            <div class="dialog-content">
                <div class="d-flex mb-2">
                    <button class="btn btn-secondary flex-1 mr-1" id="item-open">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                            <polyline points="15 3 21 3 21 9"></polyline>
                            <line x1="10" y1="14" x2="21" y2="3"></line>
                        </svg>
                        Ouvrir
                    </button>
                    <button class="btn btn-secondary flex-1 ml-1" id="item-edit">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                            <path d="M12 20h9"></path>
                            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                        </svg>
                        Modifier
                    </button>
                </div>
                <div class="d-flex mb-4">
                    <button class="btn btn-secondary flex-1 mr-1" id="item-copy">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Copier
                    </button>
                    <button class="btn btn-secondary flex-1 ml-1" id="item-move">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                            <polygon points="5 3 19 12 5 21 5 3"></polygon>
                        </svg>
                        Déplacer
                    </button>
                </div>

                <div id="item-details" class="mt-4">
                    <h4>Détails</h4>
                    <p><strong>Nom complet:</strong> <span id="detail-name">Document.pdf</span></p>
                    <p><strong>Chemin:</strong> <span id="detail-path">/Mes documents/</span></p>
                    <p><strong>Date d'ajout:</strong> <span id="detail-date">01/11/2025 10:30</span></p>
                    <p><strong>Dernière modification:</strong> <span id="detail-modified">01/11/2025 10:30</span></p>
                </div>

                <div class="d-flex mt-4">
                    <button class="btn btn-text btn-danger flex-1" id="item-hide">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                            <line x1="1" y1="1" x2="23" y2="23"></line>
                        </svg>
                        Masquer
                    </button>
                </div>
            </div>
            <div class="dialog-footer">
                <button class="btn btn-text" id="item-cancel">Fermer</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize application data
            const appData = {
                currentDirectory: '/',
                selectedItems: [],
                viewMode: 'grid',
                sortMode: 'name-asc',
                showHidden: false,
                fileSystem: {
                    '/': {
                        type: 'directory',
                        name: 'Racine',
                        contents: {},
                        created: new Date().toISOString(),
                        modified: new Date().toISOString(),
                        hidden: false
                    }
                }
            };

            // Load data from localStorage if available
            if (localStorage.getItem('projetJL_data')) {
                try {
                    const savedData = JSON.parse(localStorage.getItem('projetJL_data'));
                    if (savedData.fileSystem) {
                        appData.fileSystem = savedData.fileSystem;
                    }
                } catch (e) {
                    console.error('Error loading data from localStorage:', e);
                }
            }

            // DOM Elements
            const pages = document.querySelectorAll('.page');
            const navItems = document.querySelectorAll('.nav-item, .side-nav-item');
            const folderGrid = document.querySelector('.folder-grid');
            const themeToggle = document.querySelector('.theme-toggle');
            const addButton = document.getElementById('fab-add');
            const addSheet = document.getElementById('add-sheet');
            const createFirstItemBtn = document.getElementById('create-first-item');
            const folderDialog = document.getElementById('folder-dialog');
            const linkDialog = document.getElementById('link-dialog');
            const textDialog = document.getElementById('text-dialog');
            const optionsPanel = document.getElementById('options-panel');
            const itemOptionsDialog = document.getElementById('item-options-dialog');
            const explorerToolbar = document.getElementById('explorer-toolbar');
            const searchBar = document.querySelector('.search-bar');
            const viewToggle = document.querySelector('.view-toggle');
            const sortToggle = document.querySelector('.sort-toggle');
            const searchToggle = document.querySelector('.search-toggle');
            const breadcrumb = document.querySelector('.breadcrumb');
            const tabBar = document.querySelector('.tab-bar');

            // Function to save data to localStorage
            function saveData() {
                localStorage.setItem('projetJL_data', JSON.stringify({
                    fileSystem: appData.fileSystem
                }));
            }

            // Navigation functions
            function showPage(pageId) {
                pages.forEach(page => {
                    page.classList.add('hidden');
                });
                navItems.forEach(item => {
                    item.classList.remove('active');
                });
                
                document.querySelector(`.page-${pageId}`).classList.remove('hidden');
                document.querySelectorAll(`[data-page="${pageId}"]`).forEach(item => {
                    item.classList.add('active');
                });
                
                // Show/hide explorer toolbar
                if (pageId === 'explorer') {
                    explorerToolbar.classList.remove('hidden');
                    refreshExplorer();
                } else {
                    explorerToolbar.classList.add('hidden');
                }
                
                // Hide add button on other pages
                if (pageId === 'explorer') {
                    addButton.style.display = 'flex';
                } else {
                    addButton.style.display = 'none';
                }
            }

            // Initialize navigation
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                });
            });

            // Theme toggle
            themeToggle.addEventListener('click', function() {
                const body = document.body;
                const isDarkTheme = body.getAttribute('data-theme') === 'dark';
                body.setAttribute('data-theme', isDarkTheme ? 'light' : 'dark');
                
                const darkIcon = document.querySelector('.theme-icon-dark');
                const lightIcon = document.querySelector('.theme-icon-light');
                
                if (isDarkTheme) {
                    darkIcon.classList.add('hidden');
                    lightIcon.classList.remove('hidden');
                } else {
                    darkIcon.classList.remove('hidden');
                    lightIcon.classList.add('hidden');
                }
            });

            // Bottom Sheet Handling
            addButton.addEventListener('click', function() {
                addSheet.classList.add('visible');
            });
            
            createFirstItemBtn.addEventListener('click', function() {
                addSheet.classList.add('visible');
            });

            // Close bottom sheet when clicking outside of it
            addSheet.addEventListener('click', function(event) {
                if (event.target === addSheet) {
                    addSheet.classList.remove('visible');
                }
            });

            // Make bottom sheet draggable
            const sheetHandle = addSheet.querySelector('.bottom-sheet-handle');
            let startY, startHeight, currentHeight;
            
            sheetHandle.addEventListener('touchstart', function(e) {
                startY = e.touches[0].clientY;
                startHeight = addSheet.offsetHeight;
                addSheet.style.transition = 'none';
            });
            
            sheetHandle.addEventListener('touchmove', function(e) {
                const deltaY = e.touches[0].clientY - startY;
                currentHeight = startHeight - deltaY;
                const maxHeight = window.innerHeight * 0.8;
                const minHeight = 200;
                
                if (currentHeight > minHeight && currentHeight < maxHeight) {
                    addSheet.style.height = currentHeight + 'px';
                }
                
                if (deltaY > 100) {
                    addSheet.classList.remove('visible');
                    setTimeout(() => {
                        addSheet.style.height = '';
                        addSheet.style.transition = '';
                    }, 300);
                }
            });
            
            sheetHandle.addEventListener('touchend', function() {
                addSheet.style.transition = '';
                if (currentHeight < window.innerHeight * 0.3) {
                    addSheet.classList.remove('visible');
                }
            });

            // Add folder button
            document.getElementById('add-folder').addEventListener('click', function() {
                addSheet.classList.remove('visible');
                folderDialog.classList.add('visible');
                document.getElementById('folder-name').focus();
            });
            
            // Create folder
            document.getElementById('folder-create').addEventListener('click', function() {
                const folderName = document.getElementById('folder-name').value.trim();
                if (folderName) {
                    createFolder(folderName);
                    folderDialog.classList.remove('visible');
                    document.getElementById('folder-name').value = '';
                }
            });
            
            // Cancel folder creation
            document.getElementById('folder-cancel').addEventListener('click', function() {
                folderDialog.classList.remove('visible');
                document.getElementById('folder-name').value = '';
            });

            // Add link button
            document.getElementById('add-link').addEventListener('click', function() {
                addSheet.classList.remove('visible');
                linkDialog.classList.add('visible');
                document.getElementById('link-title').focus();
            });
            
            // Create link
            document.getElementById('link-create').addEventListener('click', function() {
                const linkTitle = document.getElementById('link-title').value.trim();
                const linkUrl = document.getElementById('link-url').value.trim();
                if (linkTitle && linkUrl) {
                    createLink(linkTitle, linkUrl);
                    linkDialog.classList.remove('visible');
                    document.getElementById('link-title').value = '';
                    document.getElementById('link-url').value = '';
                }
            });
            
            // Cancel link creation
            document.getElementById('link-cancel').addEventListener('click', function() {
                linkDialog.classList.remove('visible');
                document.getElementById('link-title').value = '';
                document.getElementById('link-url').value = '';
            });

            // Add text button
            document.getElementById('add-text').addEventListener('click', function() {
                addSheet.classList.remove('visible');
                textDialog.classList.add('visible');
                document.getElementById('text-title').focus();
            });
            
            // Create text
            document.getElementById('text-create').addEventListener('click', function() {
                const textTitle = document.getElementById('text-title').value.trim();
                const textContent = document.getElementById('text-content').value.trim();
                if (textTitle) {
                    createText(textTitle, textContent);
                    textDialog.classList.remove('visible');
                    document.getElementById('text-title').value = '';
                    document.getElementById('text-content').value = '';
                }
            });
            
            // Cancel text creation
            document.getElementById('text-cancel').addEventListener('click', function() {
                textDialog.classList.remove('visible');
                document.getElementById('text-title').value = '';
                document.getElementById('text-content').value = '';
            });

            // Close dialogs when clicking outside of them
            document.querySelectorAll('.dialog-backdrop').forEach(backdrop => {
                backdrop.addEventListener('click', function(event) {
                    if (event.target === backdrop) {
                        backdrop.classList.remove('visible');
                    }
                });
            });

            // Export/Import functionality
            document.getElementById('export-data').addEventListener('click', function() {
                const dataStr = JSON.stringify(appData.fileSystem, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
                
                const exportName = `backup_${new Date().toISOString().replace(/:/g, '-').slice(0, 19)}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportName);
                document.body.appendChild(linkElement);
                linkElement.click();
                document.body.removeChild(linkElement);
                
                addSheet.classList.remove('visible');
            });
            
            document.getElementById('import-data').addEventListener('click', function() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'application/json';
                
                input.onchange = function(e) {
                    const file = e.target.files[0];
                    const reader = new FileReader();
                    
                    reader.onload = function(event) {
                        try {
                            const importedData = JSON.parse(event.target.result);
                            appData.fileSystem = importedData;
                            saveData();
                            refreshExplorer();
                            addSheet.classList.remove('visible');
                        } catch (err) {
                            alert('Erreur: Fichier JSON invalide');
                            console.error('Error importing data:', err);
                        }
                    };
                    
                    reader.readAsText(file);
                };
                
                input.click();
            });

            // QR Code generator in Project space
            document.getElementById('generate-qr').addEventListener('click', function() {
                const url = document.getElementById('project-url').value.trim();
                if (!url) return;
                
                // Show QR code container
                document.querySelector('.qr-code-container').classList.remove('hidden');
                
                // Generate QR code using simple ASCII representation (for demo)
                const qrElement = document.getElementById('qr-code');
                qrElement.innerHTML = `
                    <div style="font-size: 10px; line-height: 1; letter-spacing: -2px; font-family: monospace; text-align: center;">
                        <div>██████████████</div>
                        <div>██          ██</div>
                        <div>██  ██████  ██</div>
                        <div>██  ██████  ██</div>
                        <div>██  ██████  ██</div>
                        <div>██          ██</div>
                        <div>██████████████</div>
                        <div>██  ██  ██  ██</div>
                        <div>████  ████  ██</div>
                        <div>██  ██████████</div>
                        <div>████  ██  ████</div>
                        <div>██    ██  ████</div>
                        <div>██████████████</div>
                        <div>██          ██</div>
                        <div>██  ██████  ██</div>
                        <div>██  ██████  ██</div>
                        <div>██  ██████  ██</div>
                        <div>██          ██</div>
                        <div>██████████████</div>
                    </div>
                    <div style="margin-top: 10px; font-size: 12px; text-align: center;">${url}</div>
                `;
            });

            // View toggle
            viewToggle.addEventListener('click', function() {
                if (appData.viewMode === 'grid') {
                    appData.viewMode = 'list';
                    folderGrid.classList.add('list-view');
                    // Change icon to grid view
                    viewToggle.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                        </svg>
                    `;
                } else {
                    appData.viewMode = 'grid';
                    folderGrid.classList.remove('list-view');
                    // Change icon to list view
                    viewToggle.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="8" y1="6" x2="21" y2="6"></line>
                            <line x1="8" y1="12" x2="21" y2="12"></line>
                            <line x1="8" y1="18" x2="21" y2="18"></line>
                            <line x1="3" y1="6" x2="3.01" y2="6"></line>
                            <line x1="3" y1="12" x2="3.01" y2="12"></line>
                            <line x1="3" y1="18" x2="3.01" y2="18"></line>
                        </svg>
                    `;
                }
                refreshExplorer();
            });

            // Sort toggle
            sortToggle.addEventListener('click', function() {
                optionsPanel.classList.add('visible');
            });

            // Search toggle
            searchToggle.addEventListener('click', function() {
                searchBar.classList.toggle('hidden');
                if (!searchBar.classList.contains('hidden')) {
                    searchBar.querySelector('input').focus();
                }
            });

            // Search close
            document.querySelector('.search-close').addEventListener('click', function() {
                searchBar.classList.add('hidden');
                searchBar.querySelector('input').value = '';
                refreshExplorer();
            });

            // Search input
            document.querySelector('.search-bar-input').addEventListener('input', function() {
                refreshExplorer();
            });

            // Tab bar
            tabBar.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    tabBar.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    refreshExplorer();
                });
            });

            // Sort options
            document.querySelectorAll('.sort-option').forEach(option => {
                option.addEventListener('click', function() {
                    appData.sortMode = this.getAttribute('data-sort');
                    document.querySelectorAll('.sort-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');
                    refreshExplorer();
                    optionsPanel.classList.remove('visible');
                });
            });

            // View options
            document.querySelectorAll('.view-option').forEach(option => {
                option.addEventListener('click', function() {
                    appData.viewMode = this.getAttribute('data-view');
                    document.querySelectorAll('.view-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    if (appData.viewMode === 'list') {
                        folderGrid.classList.add('list-view');
                    } else {
                        folderGrid.classList.remove('list-view');
                    }
                    
                    refreshExplorer();
                    optionsPanel.classList.remove('visible');
                });
            });

            // Show hidden checkbox
            document.getElementById('show-hidden').addEventListener('change', function() {
                appData.showHidden = this.checked;
                refreshExplorer();
            });

            // Select all/none
            document.getElementById('select-all').addEventListener('click', function() {
                const items = document.querySelectorAll('.folder-item');
                items.forEach(item => {
                    item.classList.add('selected');
                    const path = item.getAttribute('data-path');
                    if (!appData.selectedItems.includes(path)) {
                        appData.selectedItems.push(path);
                    }
                });
                optionsPanel.classList.remove('visible');
            });
            
            document.getElementById('select-none').addEventListener('click', function() {
                const items = document.querySelectorAll('.folder-item');
                items.forEach(item => {
                    item.classList.remove('selected');
                });
                appData.selectedItems = [];
                optionsPanel.classList.remove('visible');
            });

            // Side panel close
            document.querySelector('.side-panel-close').addEventListener('click', function() {
                optionsPanel.classList.remove('visible');
            });

            // Item options dialog close
            document.getElementById('item-cancel').addEventListener('click', function() {
                itemOptionsDialog.classList.remove('visible');
            });

            // CRUD operations for files and folders
            function createFolder(name) {
                const path = appData.currentDirectory + (appData.currentDirectory.endsWith('/') ? '' : '/') + name;
                const currentDir = getDirectoryAtPath(appData.fileSystem, appData.currentDirectory);
                
                if (currentDir.contents[name]) {
                    alert(`Un élément nommé "${name}" existe déjà à cet emplacement.`);
                    return;
                }
                
                currentDir.contents[name] = {
                    type: 'directory',
                    name: name,
                    contents: {},
                    created: new Date().toISOString(),
                    modified: new Date().toISOString(),
                    hidden: false
                };
                
                saveData();
                refreshExplorer();
            }

            function createLink(title, url) {
                const currentDir = getDirectoryAtPath(appData.fileSystem, appData.currentDirectory);
                
                if (currentDir.contents[title]) {
                    alert(`Un élément nommé "${title}" existe déjà à cet emplacement.`);
                    return;
                }
                
                currentDir.contents[title] = {
                    type: 'link',
                    name: title,
                    url: url,
                    created: new Date().toISOString(),
                    modified: new Date().toISOString(),
                    hidden: false
                };
                
                saveData();
                refreshExplorer();
            }

            function createText(title, content) {
                const currentDir = getDirectoryAtPath(appData.fileSystem, appData.currentDirectory);
                
                if (currentDir.contents[title]) {
                    alert(`Un élément nommé "${title}" existe déjà à cet emplacement.`);
                    return;
                }
                
                currentDir.contents[title] = {
                    type: 'text',
                    name: title,
                    content: content,
                    created: new Date().toISOString(),
                    modified: new Date().toISOString(),
                    hidden: false
                };
                
                saveData();
                refreshExplorer();
            }

            // Helper function to get a directory object at a specific path
            function getDirectoryAtPath(fileSystem, path) {
                if (path === '/' || path === '') {
                    return fileSystem['/'];
                }
                
                const parts = path.split('/').filter(Boolean);
                let currentDir = fileSystem['/'];
                
                for (const part of parts) {
                    if (!currentDir.contents[part] || currentDir.contents[part].type !== 'directory') {
                        return null;
                    }
                    currentDir = currentDir.contents[part];
                }
                
                return currentDir;
            }

            // Update breadcrumb
            function updateBreadcrumb() {
                breadcrumb.innerHTML = '';
                
                // Add home element
                const homeItem = document.createElement('div');
                homeItem.className = 'breadcrumb-item';
                if (appData.currentDirectory === '/') {
                    homeItem.classList.add('active');
                }
                homeItem.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                `;
                homeItem.setAttribute('data-path', '/');
                homeItem.addEventListener('click', function() {
                    navigateTo('/');
                });
                breadcrumb.appendChild(homeItem);
                
                // If we're at the root, we're done
                if (appData.currentDirectory === '/') {
                    return;
                }
                
                // Add path parts
                let currentPath = '';
                const parts = appData.currentDirectory.split('/').filter(Boolean);
                
                for (let i = 0; i < parts.length; i++) {
                    const part = parts[i];
                    currentPath += '/' + part;
                    
                    // Add separator
                    const separator = document.createElement('div');
                    separator.className = 'breadcrumb-separator';
                    separator.textContent = '/';
                    breadcrumb.appendChild(separator);
                    
                    // Add path item
                    const pathItem = document.createElement('div');
                    pathItem.className = 'breadcrumb-item';
                    if (i === parts.length - 1) {
                        pathItem.classList.add('active');
                    }
                    pathItem.textContent = part;
                    pathItem.setAttribute('data-path', currentPath);
                    pathItem.addEventListener('click', function() {
                        navigateTo(this.getAttribute('data-path'));
                    });
                    breadcrumb.appendChild(pathItem);
                }
            }

            // Navigate to a directory
            function navigateTo(path) {
                appData.currentDirectory = path;
                updateBreadcrumb();
                refreshExplorer();
            }

            // Refresh explorer view
            function refreshExplorer() {
                updateBreadcrumb();
                
                // Get current directory
                const currentDir = getDirectoryAtPath(appData.fileSystem, appData.currentDirectory);
                if (!currentDir) {
                    console.error('Directory not found:', appData.currentDirectory);
                    return;
                }
                
                // Clear grid
                folderGrid.innerHTML = '';
                
                // Get search filter
                const searchText = document.querySelector('.search-bar-input').value.toLowerCase();
                
                // Get type filter
                const activeTab = document.querySelector('.tab.active');
                const typeFilter = activeTab ? activeTab.getAttribute('data-filter') : 'all';
                
                // Get items in current directory
                let items = [];
                for (const name in currentDir.contents) {
                    const item = currentDir.contents[name];
                    
                    // Skip hidden items if not showing hidden
                    if (item.hidden && !appData.showHidden) {
                        continue;
                    }
                    
                    // Apply type filter
                    if (typeFilter !== 'all' && item.type !== typeFilter) {
                        continue;
                    }
                    
                    // Apply search filter
                    if (searchText && !name.toLowerCase().includes(searchText)) {
                        continue;
                    }
                    
                    items.push({
                        name: name,
                        ...item
                    });
                }
                
                // Sort items
                items = sortItems(items, appData.sortMode);
                
                // Show empty state if no items
                if (items.length === 0) {
                    const emptyState = document.createElement('div');
                    emptyState.className = 'text-center';
                    emptyState.style = 'grid-column: 1 / -1; padding: 3rem 1rem;';
                    
                    if (searchText) {
                        emptyState.innerHTML = `
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 1rem;">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                <line x1="8" y1="11" x2="14" y2="11"></line>
                            </svg>
                            <h3>Aucun résultat</h3>
                            <p>Aucun élément ne correspond à votre recherche.</p>
                        `;
                    } else {
                        emptyState.innerHTML = `
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 1rem;">
                                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                            </svg>
                            <h3>Dossier vide</h3>
                            <p>Commencez à créer des dossiers et à ajouter des liens ou des textes.</p>
                            <button class="btn btn-primary btn-pill mt-3" id="create-first-item-empty">Créer un élément</button>
                        `;
                    }
                    
                    folderGrid.appendChild(emptyState);
                    
                    // Add event listener to the button
                    if (!searchText) {
                        document.getElementById('create-first-item-empty').addEventListener('click', function() {
                            addSheet.classList.add('visible');
                        });
                    }
                    
                    return;
                }
                
                // Add items to grid
                items.forEach(item => {
                    const folderItem = document.createElement('div');
                    folderItem.className = 'folder-item';
                    folderItem.setAttribute('data-path', appData.currentDirectory + (appData.currentDirectory.endsWith('/') ? '' : '/') + item.name);
                    folderItem.setAttribute('data-type', item.type);
                    
                    // Check if the item is selected
                    if (appData.selectedItems.includes(folderItem.getAttribute('data-path'))) {
                        folderItem.classList.add('selected');
                    }
                    
                    let icon;
                    switch (item.type) {
                        case 'directory':
                            const isEmpty = Object.keys(item.contents).length === 0;
                            icon = isEmpty ? `
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon">
                                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                                </svg>
                            ` : `
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon">
                                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                                    <path d="M9 13h6"></path>
                                    <path d="M12 10v6"></path>
                                </svg>
                            `;
                            break;
                        case 'link':
                            icon = `
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon">
                                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                                </svg>
                            `;
                            break;
                        case 'text':
                            icon = `
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                    <polyline points="14 2 14 8 20 8"></polyline>
                                    <line x1="16" y1="13" x2="8" y2="13"></line>
                                    <line x1="16" y1="17" x2="8" y2="17"></line>
                                    <polyline points="10 9 9 9 8 9"></polyline>
                                </svg>
                            `;
                            break;
                    }
                    
                    folderItem.innerHTML = `
                        ${icon}
                        <div class="folder-name">${item.name}</div>
                        <div class="folder-options">
                            <button class="btn-icon item-menu">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="1"></circle>
                                    <circle cx="12" cy="5" r="1"></circle>
                                    <circle cx="12" cy="19" r="1"></circle>
                                </svg>
                            </button>
                        </div>
                    `;
                    
                    // Add event listeners
                    folderItem.addEventListener('click', function(e) {
                        // If clicking on the options button, don't do anything here
                        if (e.target.closest('.item-menu')) {
                            return;
                        }
                        
                        const path = this.getAttribute('data-path');
                        const type = this.getAttribute('data-type');
                        
                        if (type === 'directory') {
                            navigateTo(path);
                        } else if (type === 'link') {
                            window.open(item.url, '_blank');
                        } else if (type === 'text') {
                            // Open text viewer/editor
                            alert(`Contenu: ${item.content}`);
                        }
                    });
                    
                    folderItem.querySelector('.item-menu').addEventListener('click', function(e) {
                        e.stopPropagation();
                        showItemOptions(item);
                    });
                    
                    folderGrid.appendChild(folderItem);
                });
            }

            // Sort items
            function sortItems(items, sortMode) {
                return items.sort((a, b) => {
                    // Directories always come first
                    if (a.type === 'directory' && b.type !== 'directory') {
                        return -1;
                    }
                    if (a.type !== 'directory' && b.type === 'directory') {
                        return 1;
                    }
                    
                    // Sort by chosen method
                    switch (sortMode) {
                        case 'name-asc':
                            return a.name.localeCompare(b.name);
                        case 'name-desc':
                            return b.name.localeCompare(a.name);
                        case 'date-asc':
                            return new Date(a.created) - new Date(b.created);
                        case 'date-desc':
                            return new Date(b.created) - new Date(a.created);
                        default:
                            return 0;
                    }
                });
            }

            // Show item options
            function showItemOptions(item) {
                const dialog = document.getElementById('item-options-dialog');
                document.getElementById('item-title').textContent = item.name;
                document.getElementById('detail-name').textContent = item.name;
                document.getElementById('detail-path').textContent = appData.currentDirectory;
                document.getElementById('detail-date').textContent = formatDate(item.created);
                document.getElementById('detail-modified').textContent = formatDate(item.modified);
                
                dialog.classList.add('visible');
            }

            // Format date
            function formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleString();
            }

            // Initialize accordion functionality
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', function() {
                    const accordion = this.closest('.accordion');
                    accordion.classList.toggle('open');
                });
            });

            // Initialize tree view functionality
            document.querySelectorAll('.tree-parent').forEach(parent => {
                parent.addEventListener('click', function() {
                    this.classList.toggle('open');
                });
            });
            
            // Show home page by default
            showPage('home');
        });
    </script>
</body>
</html>
